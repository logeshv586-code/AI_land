{"ast":null,"code":"import _objectSpread from\"D:/py/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Box,Container,Typography,Grid,Card,CardContent,TextField,Button,Paper,Alert,CircularProgress,Stepper,Step,StepLabel,Accordion,AccordionSummary,AccordionDetails,List,ListItem,ListItemText,ListItemIcon,LinearProgress}from'@mui/material';import{AutoAwesome,LocationOn,Home,AttachMoney,Assessment,Recommend,Psychology,TrendingUp,CheckCircle,ExpandMore,Security,Star}from'@mui/icons-material';import{useForm,Controller}from'react-hook-form';import{motion}from'framer-motion';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ComprehensiveAnalysisPage=()=>{const[loading,setLoading]=useState(false);const[result,setResult]=useState(null);const[activeStep,setActiveStep]=useState(0);const{control,handleSubmit,formState:{errors}}=useForm({defaultValues:{property_type:'residential',beds:3,baths:2,sqft:1500,year_built:2000,lot_size:0.25}});const analysisSteps=['Property Valuation (AVM)','Beneficiary Scoring','Property Recommendations','Risk Assessment','AI Explanations'];const onSubmit=async data=>{setLoading(true);setActiveStep(0);try{// Simulate step-by-step analysis\nfor(let i=0;i<analysisSteps.length;i++){await new Promise(resolve=>setTimeout(resolve,800));setActiveStep(i+1);}// Mock comprehensive result\nconst mockResult={property_valuation:{predicted_value:275000+Math.random()*100000,value_uncertainty:15000+Math.random()*10000,price_per_sqft:183.33,confidence_score:0.85+Math.random()*0.1},beneficiary_score:{overall_score:65+Math.random()*30,value_score:70+Math.random()*25,school_score:80+Math.random()*20,safety_score:60+Math.random()*30,environmental_score:85+Math.random()*15,accessibility_score:75+Math.random()*20},recommendations:Array.from({length:5},(_,index)=>({id:index+1,address:\"\".concat(Math.floor(Math.random()*9999)+1,\" \").concat(['Main','Oak','Pine'][Math.floor(Math.random()*3)],\" St\"),predicted_value:200000+Math.random()*200000,similarity_score:0.6+Math.random()*0.4,confidence_score:0.7+Math.random()*0.3})),risk_assessment:{risk_level:['LOW','MEDIUM','HIGH'][Math.floor(Math.random()*3)],risk_factors:['Market volatility in the area','Aging infrastructure','Limited public transportation'],opportunities:['Upcoming development projects','Strong school district','Growing employment opportunities']},explanation:{valuation_factors:[{feature:'Square Footage',impact:45000,description:\"\".concat(data.sqft,\" sq ft increases value significantly\")},{feature:'Location Quality',impact:25000,description:'Excellent neighborhood location'},{feature:'Property Age',impact:-8000,description:\"\".concat(2024-data.year_built,\" years old reduces value slightly\")}],scoring_factors:[{component:'School Quality',score:85,weight:8.0,description:'Excellent school district access'},{component:'Safety',score:70,weight:6.0,description:'Good safety ratings'},{component:'Environment',score:88,weight:5.0,description:'Low environmental risks'}]}};setResult(mockResult);toast.success('Comprehensive analysis completed successfully!');}catch(error){toast.error('Failed to complete comprehensive analysis. Please try again.');}finally{setLoading(false);setActiveStep(0);}};const formatCurrency=value=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:0,maximumFractionDigits:0}).format(value);};const getScoreColor=score=>{if(score>=80)return'#10b981';if(score>=60)return'#f59e0b';return'#ef4444';};const getRiskColor=risk=>{switch(risk){case'LOW':return'#10b981';case'MEDIUM':return'#f59e0b';case'HIGH':return'#ef4444';default:return'#6b7280';}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",sx:{py:4},children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5},children:/*#__PURE__*/_jsxs(Box,{sx:{mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h1\",gutterBottom:true,sx:{fontWeight:700,color:'#1e293b'},children:\"\\uD83D\\uDE80 Comprehensive Analysis\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",sx:{mb:2},children:\"Complete property analysis combining AVM, beneficiary scoring, recommendations, and risk assessment\"}),/*#__PURE__*/_jsxs(Alert,{severity:\"info\",sx:{mb:3},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"All-in-One Analysis:\"}),\" Get property valuation, investment scoring, similar property recommendations, and AI explanations in one comprehensive report.\"]})]})}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,lg:4,children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:0.5,delay:0.1},children:[/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Home,{sx:{mr:1}}),\"Property Details\"]}),/*#__PURE__*/_jsx(Box,{component:\"form\",onSubmit:handleSubmit(onSubmit),sx:{mt:2},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Controller,{name:\"address\",control:control,rules:{required:'Address is required'},render:_ref=>{var _errors$address;let{field}=_ref;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,label:\"Property Address\",placeholder:\"123 Main St, City, State\",error:!!errors.address,helperText:(_errors$address=errors.address)===null||_errors$address===void 0?void 0:_errors$address.message,InputProps:{startAdornment:/*#__PURE__*/_jsx(LocationOn,{sx:{mr:1,color:'text.secondary'}})}}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"beds\",control:control,rules:{required:'Bedrooms is required',min:1},render:_ref2=>{var _errors$beds;let{field}=_ref2;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Bedrooms\",error:!!errors.beds,helperText:(_errors$beds=errors.beds)===null||_errors$beds===void 0?void 0:_errors$beds.message}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"baths\",control:control,rules:{required:'Bathrooms is required',min:1},render:_ref3=>{var _errors$baths;let{field}=_ref3;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Bathrooms\",error:!!errors.baths,helperText:(_errors$baths=errors.baths)===null||_errors$baths===void 0?void 0:_errors$baths.message}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"sqft\",control:control,rules:{required:'Square footage is required',min:100},render:_ref4=>{var _errors$sqft;let{field}=_ref4;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Square Feet\",error:!!errors.sqft,helperText:(_errors$sqft=errors.sqft)===null||_errors$sqft===void 0?void 0:_errors$sqft.message}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"year_built\",control:control,rules:{required:'Year built is required',min:1800,max:new Date().getFullYear()},render:_ref5=>{var _errors$year_built;let{field}=_ref5;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Year Built\",error:!!errors.year_built,helperText:(_errors$year_built=errors.year_built)===null||_errors$year_built===void 0?void 0:_errors$year_built.message}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",size:\"large\",fullWidth:true,disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(AutoAwesome,{}),sx:{py:1.5},children:loading?'Running Analysis...':'Start Comprehensive Analysis'})})]})})]})}),loading&&/*#__PURE__*/_jsx(Card,{sx:{mt:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,sx:{fontWeight:600},children:\"Analysis Progress\"}),/*#__PURE__*/_jsx(Stepper,{activeStep:activeStep,orientation:\"vertical\",children:analysisSteps.map((label,index)=>/*#__PURE__*/_jsx(Step,{children:/*#__PURE__*/_jsx(StepLabel,{StepIconComponent:()=>/*#__PURE__*/_jsx(Box,{sx:{width:24,height:24,borderRadius:'50%',bgcolor:index<activeStep?'#10b981':index===activeStep?'#2563eb':'#e2e8f0',display:'flex',alignItems:'center',justifyContent:'center'},children:index<activeStep?/*#__PURE__*/_jsx(CheckCircle,{sx:{fontSize:16,color:'white'}}):/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:index===activeStep?'white':'#6b7280',fontWeight:600},children:index+1})}),children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{fontWeight:index===activeStep?600:400},children:label})})},label))})]})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,lg:8,children:result?/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:0.5},children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:3},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(AttachMoney,{sx:{fontSize:40,color:'#2563eb',mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{fontWeight:700,color:'#2563eb'},children:formatCurrency(result.property_valuation.predicted_value)}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Estimated Value\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Star,{sx:{fontSize:40,color:getScoreColor(result.beneficiary_score.overall_score),mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{fontWeight:700,color:getScoreColor(result.beneficiary_score.overall_score)},children:result.beneficiary_score.overall_score.toFixed(1)}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Investment Score\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Recommend,{sx:{fontSize:40,color:'#10b981',mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{fontWeight:700,color:'#10b981'},children:result.recommendations.length}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Similar Properties\"})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{sx:{textAlign:'center'},children:[/*#__PURE__*/_jsx(Security,{sx:{fontSize:40,color:getRiskColor(result.risk_assessment.risk_level),mb:1}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{fontWeight:700,color:getRiskColor(result.risk_assessment.risk_level)},children:result.risk_assessment.risk_level}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Risk Level\"})]})})})]}),/*#__PURE__*/_jsxs(Accordion,{defaultExpanded:true,children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMore,{}),children:/*#__PURE__*/_jsxs(Typography,{sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(AttachMoney,{sx:{mr:1}}),\"Property Valuation Details\"]})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Price per sq ft\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\"$\",result.property_valuation.price_per_sqft.toFixed(2)]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Confidence\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[(result.property_valuation.confidence_score*100).toFixed(1),\"%\"]})]})]})})]}),/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMore,{}),children:/*#__PURE__*/_jsxs(Typography,{sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Assessment,{sx:{mr:1}}),\"Investment Score Breakdown\"]})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsxs(List,{dense:true,children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"Value Competitiveness\",secondary:\"\".concat(result.beneficiary_score.value_score.toFixed(1),\"/100\")}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:result.beneficiary_score.value_score,sx:{width:100,ml:2}})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"School Quality\",secondary:\"\".concat(result.beneficiary_score.school_score.toFixed(1),\"/100\")}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:result.beneficiary_score.school_score,sx:{width:100,ml:2}})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"Safety & Security\",secondary:\"\".concat(result.beneficiary_score.safety_score.toFixed(1),\"/100\")}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:result.beneficiary_score.safety_score,sx:{width:100,ml:2}})]})]})})]}),/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMore,{}),children:/*#__PURE__*/_jsxs(Typography,{sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Psychology,{sx:{mr:1}}),\"AI Explanations\"]})}),/*#__PURE__*/_jsxs(AccordionDetails,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{fontWeight:600,mb:2},children:\"Key Valuation Factors:\"}),/*#__PURE__*/_jsx(List,{dense:true,children:result.explanation.valuation_factors.map((factor,index)=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(TrendingUp,{sx:{color:factor.impact>0?'#10b981':'#ef4444'}})}),/*#__PURE__*/_jsx(ListItemText,{primary:factor.description,secondary:\"Impact: \".concat(factor.impact>0?'+':'').concat(formatCurrency(factor.impact))})]},index))})]})]})]}):/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0.5},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:6,textAlign:'center',bgcolor:'#f8fafc'},children:[/*#__PURE__*/_jsx(AutoAwesome,{sx:{fontSize:80,color:'#cbd5e1',mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"text.secondary\",gutterBottom:true,children:\"Ready for Comprehensive Analysis\"}),/*#__PURE__*/_jsx(Typography,{color:\"text.secondary\",children:\"Enter property details to get a complete AI-powered analysis including valuation, scoring, recommendations, and explanations\"})]})})})]})]});};export default ComprehensiveAnalysisPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}