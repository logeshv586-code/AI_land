{"ast":null,"code":"var _jsxFileName = \"D:\\\\py\\\\frontend\\\\src\\\\pages\\\\MessagesPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Box, Container, Grid, Card, CardContent, Typography, List, ListItem, ListItemAvatar, ListItemText, Avatar, TextField, Button, IconButton, Badge, Alert, Chip, Paper, LinearProgress, Switch, FormControlLabel, Tooltip } from '@mui/material';\nimport { Send, AttachFile, MoreVert, Home, Analytics, TrendingUp, Assessment, SmartToy, AutoAwesome, Info } from '@mui/icons-material';\nimport { motion } from 'framer-motion';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useSearchParams } from 'react-router-dom';\nimport { nvapiService } from '../services/nvapiService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MessagesPage = () => {\n  _s();\n  var _selectedConversation6;\n  const {\n    user\n  } = useAuth();\n  const [searchParams] = useSearchParams();\n  const [conversations, setConversations] = useState([]);\n  const [selectedConversation, setSelectedConversation] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [aiAnalysisLoading, setAiAnalysisLoading] = useState(false);\n  const [showAiSuggestions, setShowAiSuggestions] = useState(true);\n  const [aiSuggestions, setAiSuggestions] = useState([]);\n  const [landAnalysisDialog, setLandAnalysisDialog] = useState(false);\n  const [currentAnalysis, setCurrentAnalysis] = useState(null);\n  const [enhancementData, setEnhancementData] = useState(null);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState('');\n  const messagesEndRef = useRef(null);\n  const [actionMenuAnchor, setActionMenuAnchor] = useState(null);\n  useEffect(() => {\n    fetchConversations();\n\n    // Check if we need to start a new conversation\n    const agentId = searchParams.get('agent');\n    const propertyId = searchParams.get('property');\n    if (agentId && propertyId) {\n      // TODO: Start new conversation with agent about property\n    }\n  }, [searchParams]);\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  }, [messages]);\n  useEffect(() => {\n    if (newMessage.trim()) {\n      handleMessageEnhancement(newMessage);\n    } else {\n      setEnhancementData(null);\n      setAiSuggestions([]);\n    }\n  }, [newMessage]);\n  const fetchConversations = async () => {\n    try {\n      setLoading(true);\n      // TODO: Replace with actual API call\n      // Enhanced mock data with deal statuses and conversation types\n      const mockConversations = [{\n        id: 1,\n        participant: {\n          id: 2,\n          username: 'sarah_agent',\n          first_name: 'Sarah',\n          last_name: 'Johnson',\n          user_role: 'seller_agent',\n          company_name: 'Premier Realty',\n          avatar: '/api/placeholder/40/40'\n        },\n        property: {\n          id: 1,\n          title: 'Beautiful 3BR Home in Naperville',\n          price: 425000,\n          location: 'Naperville, IL',\n          type: 'Single Family',\n          sqft: 2200,\n          bedrooms: 3,\n          bathrooms: 2.5\n        },\n        last_message: {\n          id: 1,\n          content: 'Hi! I saw your interest in the Naperville property. Would you like me to run a comprehensive land analysis for this area?',\n          sender_id: 2,\n          receiver_id: (user === null || user === void 0 ? void 0 : user.id) || 1,\n          property_id: 1,\n          created_at: '2024-01-15T14:30:00Z',\n          is_read: false,\n          message_type: 'inquiry',\n          ai_enhanced: true\n        },\n        unread_count: 1,\n        deal_status: 'inquiry',\n        conversation_type: 'property_inquiry'\n      }, {\n        id: 2,\n        participant: {\n          id: 3,\n          username: 'mike_agent',\n          first_name: 'Mike',\n          last_name: 'Davis',\n          user_role: 'buyer_agent',\n          company_name: 'Urban Properties',\n          avatar: '/api/placeholder/40/40'\n        },\n        property: {\n          id: 2,\n          title: 'Modern 4BR House in Schaumburg',\n          price: 465000,\n          location: 'Schaumburg, IL',\n          type: 'Single Family',\n          sqft: 2800,\n          bedrooms: 4,\n          bathrooms: 3\n        },\n        last_message: {\n          id: 2,\n          content: 'Thanks for the property details. My client is very interested. Can we discuss deal terms?',\n          sender_id: (user === null || user === void 0 ? void 0 : user.id) || 1,\n          receiver_id: 3,\n          created_at: '2024-01-14T16:45:00Z',\n          is_read: true,\n          message_type: 'deal_discussion'\n        },\n        unread_count: 0,\n        deal_status: 'negotiating',\n        conversation_type: 'deal_discussion'\n      }, {\n        id: 3,\n        participant: {\n          id: 4,\n          username: 'property_seller',\n          first_name: 'John',\n          last_name: 'Smith',\n          user_role: 'seller',\n          avatar: '/api/placeholder/40/40'\n        },\n        property: {\n          id: 3,\n          title: 'Investment Property in Chicago',\n          price: 320000,\n          location: 'Chicago, IL',\n          type: 'Condo',\n          sqft: 1200,\n          bedrooms: 2,\n          bathrooms: 2\n        },\n        last_message: {\n          id: 3,\n          content: 'I\\'m interested in your investment analysis for the Chicago market. Can you provide insights?',\n          sender_id: (user === null || user === void 0 ? void 0 : user.id) || 1,\n          receiver_id: 4,\n          created_at: '2024-01-13T10:20:00Z',\n          is_read: true,\n          message_type: 'land_analysis'\n        },\n        unread_count: 0,\n        deal_status: 'inquiry',\n        conversation_type: 'land_analysis'\n      }];\n      setConversations(mockConversations);\n      if (mockConversations.length > 0) {\n        setSelectedConversation(mockConversations[0]);\n        fetchMessages(mockConversations[0].id);\n      }\n    } catch (err) {\n      setError('Failed to load conversations');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchMessages = async conversationId => {\n    try {\n      // TODO: Replace with actual API call\n      // Enhanced mock messages with AI features\n      const mockMessages = [{\n        id: 1,\n        content: 'Hi! I saw your interest in the Naperville property. Would you like me to run a comprehensive land analysis for this area?',\n        sender_id: 2,\n        receiver_id: (user === null || user === void 0 ? void 0 : user.id) || 1,\n        property_id: 1,\n        created_at: '2024-01-15T14:30:00Z',\n        is_read: false,\n        message_type: 'inquiry',\n        ai_enhanced: true\n      }, {\n        id: 2,\n        content: 'Yes, I\\'m very interested! Please provide a detailed analysis including safety scores, market trends, and investment potential.',\n        sender_id: (user === null || user === void 0 ? void 0 : user.id) || 1,\n        receiver_id: 2,\n        property_id: 1,\n        created_at: '2024-01-15T14:35:00Z',\n        is_read: true,\n        message_type: 'response'\n      }, {\n        id: 3,\n        content: 'Perfect! I\\'ve generated a comprehensive land analysis for Naperville. The overall score is 87.5/100 with excellent safety ratings and strong market appreciation trends.',\n        sender_id: 2,\n        receiver_id: (user === null || user === void 0 ? void 0 : user.id) || 1,\n        property_id: 1,\n        created_at: '2024-01-15T14:40:00Z',\n        is_read: false,\n        message_type: 'land_analysis',\n        ai_enhanced: true,\n        land_analysis: {\n          analysisId: 'analysis_1642255200000',\n          location: 'Naperville, IL',\n          overallScore: 87.5,\n          recommendation: 'buy',\n          confidenceLevel: 0.92,\n          keyFactors: [{\n            factor: 'Safety & Crime Rate',\n            score: 91.2,\n            impact: 'positive',\n            description: 'Extremely low crime rate with excellent police response'\n          }, {\n            factor: 'School Quality',\n            score: 95.8,\n            impact: 'positive',\n            description: 'Top-rated school district in the state'\n          }, {\n            factor: 'Market Trends',\n            score: 84.3,\n            impact: 'positive',\n            description: '8.2% price appreciation over past year'\n          }, {\n            factor: 'Transportation',\n            score: 82.7,\n            impact: 'positive',\n            description: 'Excellent highway and train access to Chicago'\n          }],\n          marketInsights: ['Naperville has shown 8.2% price appreciation over the past year', 'Inventory levels are 23% below historical averages, indicating strong demand', 'Average days on market decreased to 18 days, down from 32 days last year', 'New construction permits increased by 15%, suggesting growing neighborhood interest'],\n          riskFactors: ['Property taxes may increase due to rising assessed values', 'Traffic congestion during peak hours on main roads'],\n          opportunities: ['Upcoming transit expansion will improve connectivity', 'New shopping center development planned within 2 miles'],\n          predictedValueChange: {\n            oneYear: 6.8,\n            threeYear: 18.5,\n            fiveYear: 32.1\n          },\n          comparable_properties: [{\n            address: '1234 Maple Street',\n            price: 425000,\n            score: 87.5,\n            distance: 0.3\n          }, {\n            address: '5678 Oak Avenue',\n            price: 445000,\n            score: 91.2,\n            distance: 0.7\n          }]\n        }\n      }];\n      setMessages(mockMessages);\n    } catch (err) {\n      setError('Failed to load messages');\n    }\n  };\n  const handleMessageEnhancement = async message => {\n    if (!selectedConversation || !user) return;\n    try {\n      var _selectedConversation;\n      const conversationHistory = messages.map(msg => ({\n        role: msg.sender_id === user.id ? 'user' : 'assistant',\n        content: msg.content,\n        timestamp: msg.created_at\n      })).slice(-5); // Last 5 messages for context\n\n      const context = {\n        propertyId: (_selectedConversation = selectedConversation.property) === null || _selectedConversation === void 0 ? void 0 : _selectedConversation.id,\n        userId: user.id,\n        userRole: user.user_role,\n        conversationHistory\n      };\n      const enhancement = await nvapiService.enhanceMessage(message, context);\n      setEnhancementData(enhancement);\n      if (enhancement.suggestedResponses) {\n        setAiSuggestions(enhancement.suggestedResponses);\n      }\n    } catch (error) {\n      console.error('Error enhancing message:', error);\n    }\n  };\n  const handleSendMessage = async () => {\n    if (!newMessage.trim() || !selectedConversation) return;\n    try {\n      var _selectedConversation3;\n      setAiAnalysisLoading(true);\n\n      // Check if message should trigger land analysis\n      const shouldAnalyze = (enhancementData === null || enhancementData === void 0 ? void 0 : enhancementData.hasLandAnalysis) && /\\b(analysis|analyze|score|rating|investment|market)\\b/i.test(newMessage);\n      let landAnalysis;\n      if (shouldAnalyze && user) {\n        var _selectedConversation2;\n        const context = {\n          propertyId: (_selectedConversation2 = selectedConversation.property) === null || _selectedConversation2 === void 0 ? void 0 : _selectedConversation2.id,\n          userId: user.id,\n          userRole: user.user_role\n        };\n        landAnalysis = await nvapiService.generateLandAnalysisResponse(newMessage, context);\n        setCurrentAnalysis(landAnalysis);\n        setLandAnalysisDialog(true);\n      }\n\n      // Create new message\n      const newMsg = {\n        id: Date.now(),\n        content: newMessage,\n        sender_id: (user === null || user === void 0 ? void 0 : user.id) || 1,\n        receiver_id: selectedConversation.participant.id,\n        property_id: (_selectedConversation3 = selectedConversation.property) === null || _selectedConversation3 === void 0 ? void 0 : _selectedConversation3.id,\n        created_at: new Date().toISOString(),\n        is_read: false,\n        message_type: shouldAnalyze ? 'land_analysis' : 'response',\n        ai_enhanced: shouldAnalyze,\n        land_analysis: landAnalysis,\n        enhancement_data: enhancementData || undefined\n      };\n      setMessages(prev => [...prev, newMsg]);\n      setNewMessage('');\n      setEnhancementData(null);\n      setAiSuggestions([]);\n\n      // Generate AI response if appropriate\n      if (shouldAnalyze) {\n        setTimeout(async () => {\n          try {\n            var _selectedConversation4, _selectedConversation5;\n            const aiResponse = await nvapiService.generateConversationResponse(newMessage, {\n              propertyId: (_selectedConversation4 = selectedConversation.property) === null || _selectedConversation4 === void 0 ? void 0 : _selectedConversation4.id,\n              userId: selectedConversation.participant.id,\n              userRole: selectedConversation.participant.user_role\n            });\n            const aiMsg = {\n              id: Date.now() + 1,\n              content: aiResponse,\n              sender_id: selectedConversation.participant.id,\n              receiver_id: (user === null || user === void 0 ? void 0 : user.id) || 1,\n              property_id: (_selectedConversation5 = selectedConversation.property) === null || _selectedConversation5 === void 0 ? void 0 : _selectedConversation5.id,\n              created_at: new Date().toISOString(),\n              is_read: false,\n              message_type: 'response',\n              ai_enhanced: true\n            };\n            setMessages(prev => [...prev, aiMsg]);\n          } catch (error) {\n            console.error('Error generating AI response:', error);\n          }\n        }, 2000);\n      }\n      setSnackbarMessage('Message sent successfully!');\n      setSnackbarOpen(true);\n    } catch (err) {\n      setError('Failed to send message');\n    } finally {\n      setAiAnalysisLoading(false);\n    }\n  };\n  const handleSuggestedResponse = suggestion => {\n    setNewMessage(suggestion);\n    setAiSuggestions([]);\n  };\n  const handleRequestLandAnalysis = async () => {\n    if (!(selectedConversation !== null && selectedConversation !== void 0 && selectedConversation.property) || !user) return;\n    setAiAnalysisLoading(true);\n    try {\n      const context = {\n        propertyId: selectedConversation.property.id,\n        userId: user.id,\n        userRole: user.user_role\n      };\n      const analysis = await nvapiService.generateLandAnalysisResponse(`Please provide a comprehensive land analysis for ${selectedConversation.property.location}`, context);\n      setCurrentAnalysis(analysis);\n      setLandAnalysisDialog(true);\n    } catch (error) {\n      setError('Failed to generate land analysis');\n    } finally {\n      setAiAnalysisLoading(false);\n    }\n  };\n  const formatTime = dateString => {\n    return new Date(dateString).toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n  };\n  const formatDate = dateString => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n  const getRoleColor = role => {\n    switch (role) {\n      case 'buyer_agent':\n        return 'primary';\n      case 'seller_agent':\n        return 'secondary';\n      case 'buyer':\n        return 'info';\n      case 'seller':\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n  const getRoleLabel = role => {\n    switch (role) {\n      case 'buyer_agent':\n        return 'Buyer Agent';\n      case 'seller_agent':\n        return 'Seller Agent';\n      case 'buyer':\n        return 'Buyer';\n      case 'seller':\n        return 'Seller';\n      default:\n        return role;\n    }\n  };\n  const getDealStatusColor = status => {\n    switch (status) {\n      case 'inquiry':\n        return 'info';\n      case 'negotiating':\n        return 'warning';\n      case 'offer_pending':\n        return 'secondary';\n      case 'under_contract':\n        return 'success';\n      case 'closed':\n        return 'success';\n      case 'cancelled':\n        return 'error';\n      default:\n        return 'default';\n    }\n  };\n  const getDealStatusLabel = status => {\n    switch (status) {\n      case 'inquiry':\n        return 'Inquiry';\n      case 'negotiating':\n        return 'Negotiating';\n      case 'offer_pending':\n        return 'Offer Pending';\n      case 'under_contract':\n        return 'Under Contract';\n      case 'closed':\n        return 'Closed';\n      case 'cancelled':\n        return 'Cancelled';\n      default:\n        return 'General';\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"xl\",\n      sx: {\n        py: 4\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        children: \"Loading messages...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"xl\",\n    sx: {\n      py: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        gutterBottom: true,\n        sx: {\n          fontWeight: 'bold'\n        },\n        children: \"Messages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        color: \"text.secondary\",\n        children: \"Communicate with agents and clients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 582,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 3\n      },\n      onClose: () => setError(''),\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 9\n    }, this), user && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"info\",\n      sx: {\n        mb: 3\n      },\n      icon: /*#__PURE__*/_jsxDEV(AutoAwesome, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 53\n      }, this),\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 1,\n          mb: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(SmartToy, {\n          color: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          sx: {\n            fontWeight: 'bold'\n          },\n          children: \"AI-Enhanced Messaging Active\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 11\n      }, this), user.user_role === 'buyer' && 'Get AI-powered land analysis, market insights, and deal recommendations. Communicate directly with seller agents for property inquiries.', user.user_role === 'seller' && 'Receive AI-generated property valuations and market trends. Connect with buyer agents to discuss deals and negotiations.', user.user_role === 'buyer_agent' && 'Access comprehensive AI analytics for client presentations. Communicate with all parties to facilitate deals.', user.user_role === 'seller_agent' && 'Leverage AI insights for competitive market analysis. Guide clients through deal negotiations with data-driven recommendations.']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      sx: {\n        height: 'calc(100vh - 300px)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: [/*#__PURE__*/_jsxDEV(CardContent, {\n            sx: {\n              pb: 0\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"Conversations\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(List, {\n            sx: {\n              flexGrow: 1,\n              overflow: 'auto'\n            },\n            children: conversations.map(conversation => {\n              var _conversation$partici;\n              return /*#__PURE__*/_jsxDEV(ListItem, {\n                button: true,\n                selected: (selectedConversation === null || selectedConversation === void 0 ? void 0 : selectedConversation.id) === conversation.id,\n                onClick: () => {\n                  setSelectedConversation(conversation);\n                  fetchMessages(conversation.id);\n                },\n                sx: {\n                  borderRadius: 1,\n                  mx: 1,\n                  mb: 1,\n                  '&.Mui-selected': {\n                    backgroundColor: 'primary.light',\n                    '&:hover': {\n                      backgroundColor: 'primary.light'\n                    }\n                  }\n                },\n                children: [/*#__PURE__*/_jsxDEV(ListItemAvatar, {\n                  children: /*#__PURE__*/_jsxDEV(Badge, {\n                    badgeContent: conversation.unread_count,\n                    color: \"error\",\n                    children: /*#__PURE__*/_jsxDEV(Avatar, {\n                      src: conversation.participant.avatar,\n                      children: ((_conversation$partici = conversation.participant.first_name) === null || _conversation$partici === void 0 ? void 0 : _conversation$partici.charAt(0)) || conversation.participant.username.charAt(0).toUpperCase()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 651,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 650,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 649,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: 1,\n                      mb: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"subtitle2\",\n                      children: [conversation.participant.first_name, \" \", conversation.participant.last_name]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 660,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Chip, {\n                      size: \"small\",\n                      label: getRoleLabel(conversation.participant.user_role),\n                      color: getRoleColor(conversation.participant.user_role),\n                      variant: \"outlined\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 663,\n                      columnNumber: 25\n                    }, this), conversation.deal_status && /*#__PURE__*/_jsxDEV(Chip, {\n                      size: \"small\",\n                      label: getDealStatusLabel(conversation.deal_status),\n                      color: getDealStatusColor(conversation.deal_status),\n                      variant: \"filled\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 670,\n                      columnNumber: 27\n                    }, this), conversation.last_message.ai_enhanced && /*#__PURE__*/_jsxDEV(Tooltip, {\n                      title: \"AI Enhanced Conversation\",\n                      children: /*#__PURE__*/_jsxDEV(SmartToy, {\n                        fontSize: \"small\",\n                        color: \"primary\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 679,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 678,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 659,\n                    columnNumber: 23\n                  }, this),\n                  secondary: /*#__PURE__*/_jsxDEV(Box, {\n                    children: [conversation.participant.company_name && /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"caption\",\n                      color: \"text.secondary\",\n                      display: \"block\",\n                      children: conversation.participant.company_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 687,\n                      columnNumber: 27\n                    }, this), conversation.property && /*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: 0.5,\n                        mt: 0.5,\n                        mb: 0.5\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(Home, {\n                        fontSize: \"small\",\n                        color: \"action\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 693,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"caption\",\n                        color: \"text.secondary\",\n                        children: conversation.property.title\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 694,\n                        columnNumber: 29\n                      }, this), conversation.property.type && /*#__PURE__*/_jsxDEV(Chip, {\n                        size: \"small\",\n                        label: conversation.property.type,\n                        variant: \"outlined\",\n                        sx: {\n                          height: 16,\n                          fontSize: '0.6rem'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 698,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 692,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      sx: {\n                        mt: 0.5\n                      },\n                      noWrap: true,\n                      children: conversation.last_message.content\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 707,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        mt: 0.5\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"caption\",\n                        color: \"text.secondary\",\n                        children: formatDate(conversation.last_message.created_at)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 711,\n                        columnNumber: 27\n                      }, this), conversation.conversation_type && /*#__PURE__*/_jsxDEV(Chip, {\n                        size: \"small\",\n                        label: conversation.conversation_type.replace('_', ' '),\n                        variant: \"outlined\",\n                        sx: {\n                          height: 16,\n                          fontSize: '0.6rem'\n                        },\n                        icon: conversation.conversation_type === 'land_analysis' ? /*#__PURE__*/_jsxDEV(Analytics, {\n                          fontSize: \"small\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 721,\n                          columnNumber: 86\n                        }, this) : conversation.conversation_type === 'deal_discussion' ? /*#__PURE__*/_jsxDEV(TrendingUp, {\n                          fontSize: \"small\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 722,\n                          columnNumber: 88\n                        }, this) : /*#__PURE__*/_jsxDEV(Info, {\n                          fontSize: \"small\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 723,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 715,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 710,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 685,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 657,\n                  columnNumber: 19\n                }, this)]\n              }, conversation.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 629,\n                columnNumber: 17\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              p: 2,\n              borderTop: 1,\n              borderColor: 'divider',\n              backgroundColor: 'grey.50'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                gap: 1,\n                flexWrap: 'wrap'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                title: \"Request AI Land Analysis\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  variant: \"outlined\",\n                  startIcon: /*#__PURE__*/_jsxDEV(Analytics, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 741,\n                    columnNumber: 36\n                  }, this),\n                  onClick: handleRequestLandAnalysis,\n                  disabled: aiAnalysisLoading || !(selectedConversation !== null && selectedConversation !== void 0 && selectedConversation.property),\n                  children: \"Land Analysis\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 738,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 737,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                title: \"Get Market Insights\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  variant: \"outlined\",\n                  startIcon: /*#__PURE__*/_jsxDEV(TrendingUp, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 752,\n                    columnNumber: 36\n                  }, this),\n                  disabled: aiAnalysisLoading,\n                  children: \"Market Trends\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 749,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                control: /*#__PURE__*/_jsxDEV(Switch, {\n                  checked: showAiSuggestions,\n                  onChange: e => setShowAiSuggestions(e.target.checked),\n                  size: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 760,\n                  columnNumber: 25\n                }, this),\n                label: /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  children: \"AI Suggestions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 767,\n                  columnNumber: 25\n                }, this),\n                sx: {\n                  ml: 'auto'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 758,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 736,\n              columnNumber: 19\n            }, this), aiAnalysisLoading && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(LinearProgress, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 776,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"text.secondary\",\n                children: \"Generating AI analysis...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 777,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 775,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 735,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 8,\n        children: selectedConversation ? /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: [/*#__PURE__*/_jsxDEV(CardContent, {\n            sx: {\n              pb: 1,\n              borderBottom: 1,\n              borderColor: 'divider'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 2\n                },\n                children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                  src: selectedConversation.participant.avatar,\n                  children: ((_selectedConversation6 = selectedConversation.participant.first_name) === null || _selectedConversation6 === void 0 ? void 0 : _selectedConversation6.charAt(0)) || selectedConversation.participant.username.charAt(0).toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 794,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    children: [selectedConversation.participant.first_name, \" \", selectedConversation.participant.last_name]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 799,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Chip, {\n                      size: \"small\",\n                      label: getRoleLabel(selectedConversation.participant.user_role),\n                      color: getRoleColor(selectedConversation.participant.user_role),\n                      variant: \"outlined\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 803,\n                      columnNumber: 25\n                    }, this), selectedConversation.participant.company_name && /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      color: \"text.secondary\",\n                      children: [\"\\u2022 \", selectedConversation.participant.company_name]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 810,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 802,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 798,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 793,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                children: /*#__PURE__*/_jsxDEV(MoreVert, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 818,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 817,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 792,\n              columnNumber: 17\n            }, this), selectedConversation.property && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2,\n                p: 2,\n                backgroundColor: 'grey.50',\n                borderRadius: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 1,\n                  mb: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(Home, {\n                  color: \"primary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 826,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"subtitle2\",\n                  children: selectedConversation.property.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 827,\n                  columnNumber: 23\n                }, this), selectedConversation.deal_status && /*#__PURE__*/_jsxDEV(Chip, {\n                  size: \"small\",\n                  label: getDealStatusLabel(selectedConversation.deal_status),\n                  color: getDealStatusColor(selectedConversation.deal_status),\n                  variant: \"filled\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 831,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 825,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                sx: {\n                  mb: 1\n                },\n                children: [\"$\", selectedConversation.property.price.toLocaleString(), \" \\u2022 \", selectedConversation.property.location]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 839,\n                columnNumber: 21\n              }, this), selectedConversation.property.sqft && /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  gap: 2,\n                  flexWrap: 'wrap'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  children: [selectedConversation.property.sqft.toLocaleString(), \" sq ft\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 844,\n                  columnNumber: 25\n                }, this), selectedConversation.property.bedrooms && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  children: [selectedConversation.property.bedrooms, \" bed\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 848,\n                  columnNumber: 27\n                }, this), selectedConversation.property.bathrooms && /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"caption\",\n                  color: \"text.secondary\",\n                  children: [selectedConversation.property.bathrooms, \" bath\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 853,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 843,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  gap: 1,\n                  mt: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  startIcon: /*#__PURE__*/_jsxDEV(Analytics, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 860,\n                    columnNumber: 55\n                  }, this),\n                  onClick: handleRequestLandAnalysis,\n                  children: \"AI Analysis\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 860,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"small\",\n                  startIcon: /*#__PURE__*/_jsxDEV(TrendingUp, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 863,\n                    columnNumber: 55\n                  }, this),\n                  children: \"Market Data\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 863,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 859,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 824,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 791,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              flexGrow: 1,\n              overflow: 'auto',\n              p: 2\n            },\n            children: [messages.map(message => /*#__PURE__*/_jsxDEV(motion.div, {\n              initial: {\n                opacity: 0,\n                y: 10\n              },\n              animate: {\n                opacity: 1,\n                y: 0\n              },\n              transition: {\n                duration: 0.2\n              },\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  justifyContent: message.sender_id === (user === null || user === void 0 ? void 0 : user.id) ? 'flex-end' : 'flex-start',\n                  mb: 2\n                },\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    maxWidth: '75%'\n                  },\n                  children: [message.ai_enhanced && /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: 1,\n                      mb: 1,\n                      justifyContent: message.sender_id === (user === null || user === void 0 ? void 0 : user.id) ? 'flex-end' : 'flex-start'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(SmartToy, {\n                      fontSize: \"small\",\n                      color: \"primary\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 891,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"caption\",\n                      color: \"primary\",\n                      children: \"AI Enhanced\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 892,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 890,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Paper, {\n                    elevation: 1,\n                    sx: {\n                      p: 2,\n                      borderRadius: 2,\n                      backgroundColor: message.sender_id === (user === null || user === void 0 ? void 0 : user.id) ? 'primary.main' : 'grey.100',\n                      color: message.sender_id === (user === null || user === void 0 ? void 0 : user.id) ? 'white' : 'text.primary'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body1\",\n                      children: message.content\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 908,\n                      columnNumber: 27\n                    }, this), message.land_analysis && /*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        mt: 2,\n                        p: 1,\n                        backgroundColor: 'rgba(255,255,255,0.1)',\n                        borderRadius: 1\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(Box, {\n                        sx: {\n                          display: 'flex',\n                          alignItems: 'center',\n                          gap: 1,\n                          mb: 1\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(Analytics, {\n                          fontSize: \"small\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 916,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"subtitle2\",\n                          children: [\"Land Analysis: \", message.land_analysis.location]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 917,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(Chip, {\n                          size: \"small\",\n                          label: `Score: ${message.land_analysis.overallScore}/100`,\n                          color: message.land_analysis.overallScore >= 80 ? 'success' : message.land_analysis.overallScore >= 60 ? 'warning' : 'error',\n                          variant: \"filled\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 920,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 915,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"body2\",\n                        sx: {\n                          opacity: 0.9,\n                          mb: 1\n                        },\n                        children: [\"Recommendation: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: message.land_analysis.recommendation.toUpperCase()\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 928,\n                          columnNumber: 49\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 927,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Button, {\n                        size: \"small\",\n                        variant: \"outlined\",\n                        sx: {\n                          color: 'inherit',\n                          borderColor: 'rgba(255,255,255,0.5)'\n                        },\n                        onClick: () => {\n                          setCurrentAnalysis(message.land_analysis);\n                          setLandAnalysisDialog(true);\n                        },\n                        children: \"View Full Analysis\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 930,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 914,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"caption\",\n                      sx: {\n                        display: 'block',\n                        mt: 1,\n                        opacity: 0.8,\n                        textAlign: 'right'\n                      },\n                      children: [formatTime(message.created_at), message.message_type && message.message_type !== 'response' && /*#__PURE__*/_jsxDEV(Chip, {\n                        size: \"small\",\n                        label: message.message_type.replace('_', ' '),\n                        sx: {\n                          ml: 1,\n                          height: 16,\n                          fontSize: '0.6rem'\n                        },\n                        variant: \"outlined\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 955,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 944,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 899,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 887,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 880,\n                columnNumber: 21\n              }, this)\n            }, message.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 874,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 968,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 872,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              p: 2,\n              borderTop: 1,\n              borderColor: 'divider'\n            },\n            children: [showAiSuggestions && aiSuggestions.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mb: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"text.secondary\",\n                sx: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 0.5,\n                  mb: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(AutoAwesome, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 977,\n                  columnNumber: 23\n                }, this), \"AI Suggestions:\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 976,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  gap: 1,\n                  flexWrap: 'wrap'\n                },\n                children: aiSuggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(Chip, {\n                  label: suggestion,\n                  size: \"small\",\n                  variant: \"outlined\",\n                  onClick: () => handleSuggestedResponse(suggestion),\n                  sx: {\n                    cursor: 'pointer'\n                  }\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 982,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 980,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 975,\n              columnNumber: 19\n            }, this), enhancementData && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mb: 2,\n                p: 1,\n                backgroundColor: 'info.light',\n                borderRadius: 1,\n                opacity: 0.8\n              },\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  gap: 2,\n                  alignItems: 'center'\n                },\n                children: [enhancementData.hasLandAnalysis && /*#__PURE__*/_jsxDEV(Chip, {\n                  size: \"small\",\n                  icon: /*#__PURE__*/_jsxDEV(Analytics, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1002,\n                    columnNumber: 33\n                  }, this),\n                  label: \"Land Analysis Available\",\n                  color: \"primary\",\n                  variant: \"outlined\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1000,\n                  columnNumber: 25\n                }, this), enhancementData.hasPriceAnalysis && /*#__PURE__*/_jsxDEV(Chip, {\n                  size: \"small\",\n                  icon: /*#__PURE__*/_jsxDEV(TrendingUp, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1011,\n                    columnNumber: 33\n                  }, this),\n                  label: \"Price Analysis Available\",\n                  color: \"secondary\",\n                  variant: \"outlined\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1009,\n                  columnNumber: 25\n                }, this), enhancementData.hasMarketTrends && /*#__PURE__*/_jsxDEV(Chip, {\n                  size: \"small\",\n                  icon: /*#__PURE__*/_jsxDEV(Assessment, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1020,\n                    columnNumber: 33\n                  }, this),\n                  label: \"Market Trends Available\",\n                  color: \"success\",\n                  variant: \"outlined\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1018,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 998,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 997,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                gap: 1,\n                alignItems: 'flex-end'\n              },\n              children: [/*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                multiline: true,\n                maxRows: 3,\n                placeholder: \"Type your message... (Try mentioning location, analysis, or market trends for AI insights)\",\n                value: newMessage,\n                onChange: e => setNewMessage(e.target.value),\n                onKeyPress: e => {\n                  if (e.key === 'Enter' && !e.shiftKey) {\n                    e.preventDefault();\n                    handleSendMessage();\n                  }\n                },\n                InputProps: {\n                  endAdornment: enhancementData && /*#__PURE__*/_jsxDEV(Tooltip, {\n                    title: \"AI enhancements detected\",\n                    children: /*#__PURE__*/_jsxDEV(SmartToy, {\n                      color: \"primary\",\n                      fontSize: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1047,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1046,\n                    columnNumber: 25\n                  }, this)\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1031,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                title: \"Attach File\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"primary\",\n                  children: /*#__PURE__*/_jsxDEV(AttachFile, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1054,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1053,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1052,\n                columnNumber: 19\n              }, this), (enhancementData === null || enhancementData === void 0 ? void 0 : enhancementData.hasLandAnalysis) && /*#__PURE__*/_jsxDEV(Tooltip, {\n                title: \"Generate Land Analysis\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"secondary\",\n                  onClick: handleRequestLandAnalysis,\n                  children: /*#__PURE__*/_jsxDEV(Analytics, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1060,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1059,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1058,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                endIcon: aiAnalysisLoading ? /*#__PURE__*/_jsxDEV(SmartToy, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1066,\n                  columnNumber: 50\n                }, this) : /*#__PURE__*/_jsxDEV(Send, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1066,\n                  columnNumber: 65\n                }, this),\n                onClick: handleSendMessage,\n                disabled: !newMessage.trim() || aiAnalysisLoading,\n                children: aiAnalysisLoading ? 'Analyzing...' : 'Send'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1064,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1030,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 972,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 789,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            height: '100%',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              textAlign: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              color: \"text.secondary\",\n              children: \"Select a conversation to start messaging\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1078,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1077,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1076,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 787,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 618,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 580,\n    columnNumber: 5\n  }, this);\n};\n_s(MessagesPage, \"fYIlJZpBw0JPABcbrXG/VAhdaB4=\", false, function () {\n  return [useAuth, useSearchParams];\n});\n_c = MessagesPage;\nexport default MessagesPage;\nvar _c;\n$RefreshReg$(_c, \"MessagesPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Box","Container","Grid","Card","CardContent","Typography","List","ListItem","ListItemAvatar","ListItemText","Avatar","TextField","Button","IconButton","Badge","Alert","Chip","Paper","LinearProgress","Switch","FormControlLabel","Tooltip","Send","AttachFile","MoreVert","Home","Analytics","TrendingUp","Assessment","SmartToy","AutoAwesome","Info","motion","useAuth","useSearchParams","nvapiService","jsxDEV","_jsxDEV","MessagesPage","_s","_selectedConversation6","user","searchParams","conversations","setConversations","selectedConversation","setSelectedConversation","messages","setMessages","newMessage","setNewMessage","loading","setLoading","error","setError","aiAnalysisLoading","setAiAnalysisLoading","showAiSuggestions","setShowAiSuggestions","aiSuggestions","setAiSuggestions","landAnalysisDialog","setLandAnalysisDialog","currentAnalysis","setCurrentAnalysis","enhancementData","setEnhancementData","snackbarOpen","setSnackbarOpen","snackbarMessage","setSnackbarMessage","messagesEndRef","actionMenuAnchor","setActionMenuAnchor","fetchConversations","agentId","get","propertyId","current","scrollIntoView","behavior","trim","handleMessageEnhancement","mockConversations","id","participant","username","first_name","last_name","user_role","company_name","avatar","property","title","price","location","type","sqft","bedrooms","bathrooms","last_message","content","sender_id","receiver_id","property_id","created_at","is_read","message_type","ai_enhanced","unread_count","deal_status","conversation_type","length","fetchMessages","err","conversationId","mockMessages","land_analysis","analysisId","overallScore","recommendation","confidenceLevel","keyFactors","factor","score","impact","description","marketInsights","riskFactors","opportunities","predictedValueChange","oneYear","threeYear","fiveYear","comparable_properties","address","distance","message","_selectedConversation","conversationHistory","map","msg","role","timestamp","slice","context","userId","userRole","enhancement","enhanceMessage","suggestedResponses","console","handleSendMessage","_selectedConversation3","shouldAnalyze","hasLandAnalysis","test","landAnalysis","_selectedConversation2","generateLandAnalysisResponse","newMsg","Date","now","toISOString","enhancement_data","undefined","prev","setTimeout","_selectedConversation4","_selectedConversation5","aiResponse","generateConversationResponse","aiMsg","handleSuggestedResponse","suggestion","handleRequestLandAnalysis","analysis","formatTime","dateString","toLocaleTimeString","hour","minute","hour12","formatDate","toLocaleDateString","month","day","getRoleColor","getRoleLabel","getDealStatusColor","status","getDealStatusLabel","maxWidth","sx","py","children","fileName","_jsxFileName","lineNumber","columnNumber","mb","variant","component","gutterBottom","fontWeight","color","severity","onClose","icon","display","alignItems","gap","container","spacing","height","item","xs","md","flexDirection","pb","flexGrow","overflow","conversation","_conversation$partici","button","selected","onClick","borderRadius","mx","backgroundColor","badgeContent","src","charAt","toUpperCase","primary","size","label","fontSize","secondary","mt","noWrap","justifyContent","replace","p","borderTop","borderColor","flexWrap","startIcon","disabled","control","checked","onChange","e","target","ml","borderBottom","toLocaleString","div","initial","opacity","y","animate","transition","duration","elevation","textAlign","ref","index","cursor","hasPriceAnalysis","hasMarketTrends","fullWidth","multiline","maxRows","placeholder","value","onKeyPress","key","shiftKey","preventDefault","InputProps","endAdornment","endIcon","_c","$RefreshReg$"],"sources":["D:/py/frontend/src/pages/MessagesPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport {\n  Box,\n  Container,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Avatar,\n  TextField,\n  Button,\n  IconButton,\n  Divider,\n  Badge,\n  Alert,\n  Chip,\n  Paper,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Fab,\n  Menu,\n  MenuItem,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  LinearProgress,\n  Switch,\n  FormControlLabel,\n  Tooltip,\n  Snackbar,\n} from '@mui/material';\nimport {\n  Send,\n  AttachFile,\n  MoreVert,\n  Person,\n  Business,\n  Home,\n  Analytics,\n  TrendingUp,\n  LocationOn,\n  Assessment,\n  SmartToy,\n  AutoAwesome,\n  ExpandMore,\n  Speed,\n  Security,\n  School,\n  Warning,\n  CheckCircle,\n  Info,\n} from '@mui/icons-material';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useSearchParams } from 'react-router-dom';\nimport { nvapiService, LandAnalysisResponse, ConversationContext, MessageEnhancement } from '../services/nvapiService';\n\ninterface Message {\n  id: number;\n  content: string;\n  sender_id: number;\n  receiver_id: number;\n  property_id?: number;\n  created_at: string;\n  is_read: boolean;\n  message_type?: 'inquiry' | 'response' | 'follow_up' | 'offer' | 'land_analysis' | 'deal_discussion';\n  ai_enhanced?: boolean;\n  land_analysis?: LandAnalysisResponse;\n  enhancement_data?: MessageEnhancement;\n}\n\ninterface Conversation {\n  id: number;\n  participant: {\n    id: number;\n    username: string;\n    first_name?: string;\n    last_name?: string;\n    user_role: string;\n    company_name?: string;\n    avatar?: string;\n  };\n  property?: {\n    id: number;\n    title: string;\n    price: number;\n    location: string;\n    type?: string;\n    sqft?: number;\n    bedrooms?: number;\n    bathrooms?: number;\n  };\n  last_message: Message;\n  unread_count: number;\n  deal_status?: 'inquiry' | 'negotiating' | 'offer_pending' | 'under_contract' | 'closed' | 'cancelled';\n  conversation_type?: 'general' | 'property_inquiry' | 'deal_discussion' | 'land_analysis';\n}\n\nconst MessagesPage: React.FC = () => {\n  const { user } = useAuth();\n  const [searchParams] = useSearchParams();\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [selectedConversation, setSelectedConversation] = useState<Conversation | null>(null);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [aiAnalysisLoading, setAiAnalysisLoading] = useState(false);\n  const [showAiSuggestions, setShowAiSuggestions] = useState(true);\n  const [aiSuggestions, setAiSuggestions] = useState<string[]>([]);\n  const [landAnalysisDialog, setLandAnalysisDialog] = useState(false);\n  const [currentAnalysis, setCurrentAnalysis] = useState<LandAnalysisResponse | null>(null);\n  const [enhancementData, setEnhancementData] = useState<MessageEnhancement | null>(null);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState('');\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const [actionMenuAnchor, setActionMenuAnchor] = useState<null | HTMLElement>(null);\n\n  useEffect(() => {\n    fetchConversations();\n    \n    // Check if we need to start a new conversation\n    const agentId = searchParams.get('agent');\n    const propertyId = searchParams.get('property');\n    if (agentId && propertyId) {\n      // TODO: Start new conversation with agent about property\n    }\n  }, [searchParams]);\n\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [messages]);\n\n  useEffect(() => {\n    if (newMessage.trim()) {\n      handleMessageEnhancement(newMessage);\n    } else {\n      setEnhancementData(null);\n      setAiSuggestions([]);\n    }\n  }, [newMessage]);\n\n  const fetchConversations = async () => {\n    try {\n      setLoading(true);\n      // TODO: Replace with actual API call\n      // Enhanced mock data with deal statuses and conversation types\n      const mockConversations: Conversation[] = [\n        {\n          id: 1,\n          participant: {\n            id: 2,\n            username: 'sarah_agent',\n            first_name: 'Sarah',\n            last_name: 'Johnson',\n            user_role: 'seller_agent',\n            company_name: 'Premier Realty',\n            avatar: '/api/placeholder/40/40'\n          },\n          property: {\n            id: 1,\n            title: 'Beautiful 3BR Home in Naperville',\n            price: 425000,\n            location: 'Naperville, IL',\n            type: 'Single Family',\n            sqft: 2200,\n            bedrooms: 3,\n            bathrooms: 2.5\n          },\n          last_message: {\n            id: 1,\n            content: 'Hi! I saw your interest in the Naperville property. Would you like me to run a comprehensive land analysis for this area?',\n            sender_id: 2,\n            receiver_id: user?.id || 1,\n            property_id: 1,\n            created_at: '2024-01-15T14:30:00Z',\n            is_read: false,\n            message_type: 'inquiry',\n            ai_enhanced: true\n          },\n          unread_count: 1,\n          deal_status: 'inquiry',\n          conversation_type: 'property_inquiry'\n        },\n        {\n          id: 2,\n          participant: {\n            id: 3,\n            username: 'mike_agent',\n            first_name: 'Mike',\n            last_name: 'Davis',\n            user_role: 'buyer_agent',\n            company_name: 'Urban Properties',\n            avatar: '/api/placeholder/40/40'\n          },\n          property: {\n            id: 2,\n            title: 'Modern 4BR House in Schaumburg',\n            price: 465000,\n            location: 'Schaumburg, IL',\n            type: 'Single Family',\n            sqft: 2800,\n            bedrooms: 4,\n            bathrooms: 3\n          },\n          last_message: {\n            id: 2,\n            content: 'Thanks for the property details. My client is very interested. Can we discuss deal terms?',\n            sender_id: user?.id || 1,\n            receiver_id: 3,\n            created_at: '2024-01-14T16:45:00Z',\n            is_read: true,\n            message_type: 'deal_discussion'\n          },\n          unread_count: 0,\n          deal_status: 'negotiating',\n          conversation_type: 'deal_discussion'\n        },\n        {\n          id: 3,\n          participant: {\n            id: 4,\n            username: 'property_seller',\n            first_name: 'John',\n            last_name: 'Smith',\n            user_role: 'seller',\n            avatar: '/api/placeholder/40/40'\n          },\n          property: {\n            id: 3,\n            title: 'Investment Property in Chicago',\n            price: 320000,\n            location: 'Chicago, IL',\n            type: 'Condo',\n            sqft: 1200,\n            bedrooms: 2,\n            bathrooms: 2\n          },\n          last_message: {\n            id: 3,\n            content: 'I\\'m interested in your investment analysis for the Chicago market. Can you provide insights?',\n            sender_id: user?.id || 1,\n            receiver_id: 4,\n            created_at: '2024-01-13T10:20:00Z',\n            is_read: true,\n            message_type: 'land_analysis'\n          },\n          unread_count: 0,\n          deal_status: 'inquiry',\n          conversation_type: 'land_analysis'\n        }\n      ];\n      \n      setConversations(mockConversations);\n      if (mockConversations.length > 0) {\n        setSelectedConversation(mockConversations[0]);\n        fetchMessages(mockConversations[0].id);\n      }\n    } catch (err: any) {\n      setError('Failed to load conversations');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchMessages = async (conversationId: number) => {\n    try {\n      // TODO: Replace with actual API call\n      // Enhanced mock messages with AI features\n      const mockMessages: Message[] = [\n        {\n          id: 1,\n          content: 'Hi! I saw your interest in the Naperville property. Would you like me to run a comprehensive land analysis for this area?',\n          sender_id: 2,\n          receiver_id: user?.id || 1,\n          property_id: 1,\n          created_at: '2024-01-15T14:30:00Z',\n          is_read: false,\n          message_type: 'inquiry',\n          ai_enhanced: true\n        },\n        {\n          id: 2,\n          content: 'Yes, I\\'m very interested! Please provide a detailed analysis including safety scores, market trends, and investment potential.',\n          sender_id: user?.id || 1,\n          receiver_id: 2,\n          property_id: 1,\n          created_at: '2024-01-15T14:35:00Z',\n          is_read: true,\n          message_type: 'response'\n        },\n        {\n          id: 3,\n          content: 'Perfect! I\\'ve generated a comprehensive land analysis for Naperville. The overall score is 87.5/100 with excellent safety ratings and strong market appreciation trends.',\n          sender_id: 2,\n          receiver_id: user?.id || 1,\n          property_id: 1,\n          created_at: '2024-01-15T14:40:00Z',\n          is_read: false,\n          message_type: 'land_analysis',\n          ai_enhanced: true,\n          land_analysis: {\n            analysisId: 'analysis_1642255200000',\n            location: 'Naperville, IL',\n            overallScore: 87.5,\n            recommendation: 'buy',\n            confidenceLevel: 0.92,\n            keyFactors: [\n              { factor: 'Safety & Crime Rate', score: 91.2, impact: 'positive', description: 'Extremely low crime rate with excellent police response' },\n              { factor: 'School Quality', score: 95.8, impact: 'positive', description: 'Top-rated school district in the state' },\n              { factor: 'Market Trends', score: 84.3, impact: 'positive', description: '8.2% price appreciation over past year' },\n              { factor: 'Transportation', score: 82.7, impact: 'positive', description: 'Excellent highway and train access to Chicago' }\n            ],\n            marketInsights: [\n              'Naperville has shown 8.2% price appreciation over the past year',\n              'Inventory levels are 23% below historical averages, indicating strong demand',\n              'Average days on market decreased to 18 days, down from 32 days last year',\n              'New construction permits increased by 15%, suggesting growing neighborhood interest'\n            ],\n            riskFactors: [\n              'Property taxes may increase due to rising assessed values',\n              'Traffic congestion during peak hours on main roads'\n            ],\n            opportunities: [\n              'Upcoming transit expansion will improve connectivity',\n              'New shopping center development planned within 2 miles'\n            ],\n            predictedValueChange: {\n              oneYear: 6.8,\n              threeYear: 18.5,\n              fiveYear: 32.1\n            },\n            comparable_properties: [\n              { address: '1234 Maple Street', price: 425000, score: 87.5, distance: 0.3 },\n              { address: '5678 Oak Avenue', price: 445000, score: 91.2, distance: 0.7 }\n            ]\n          }\n        }\n      ];\n      \n      setMessages(mockMessages);\n    } catch (err: any) {\n      setError('Failed to load messages');\n    }\n  };\n\n  const handleMessageEnhancement = async (message: string) => {\n    if (!selectedConversation || !user) return;\n    \n    try {\n      const conversationHistory: Array<{\n        role: 'user' | 'assistant';\n        content: string;\n        timestamp: string;\n      }> = messages.map(msg => ({\n        role: msg.sender_id === user.id ? 'user' as const : 'assistant' as const,\n        content: msg.content,\n        timestamp: msg.created_at\n      })).slice(-5); // Last 5 messages for context\n      \n      const context: ConversationContext = {\n        propertyId: selectedConversation.property?.id,\n        userId: user.id,\n        userRole: user.user_role,\n        conversationHistory\n      };\n      \n      const enhancement = await nvapiService.enhanceMessage(message, context);\n      setEnhancementData(enhancement);\n      \n      if (enhancement.suggestedResponses) {\n        setAiSuggestions(enhancement.suggestedResponses);\n      }\n    } catch (error) {\n      console.error('Error enhancing message:', error);\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (!newMessage.trim() || !selectedConversation) return;\n\n    try {\n      setAiAnalysisLoading(true);\n      \n      // Check if message should trigger land analysis\n      const shouldAnalyze = enhancementData?.hasLandAnalysis && \n        /\\b(analysis|analyze|score|rating|investment|market)\\b/i.test(newMessage);\n      \n      let landAnalysis: LandAnalysisResponse | undefined;\n      \n      if (shouldAnalyze && user) {\n        const context: ConversationContext = {\n          propertyId: selectedConversation.property?.id,\n          userId: user.id,\n          userRole: user.user_role\n        };\n        \n        landAnalysis = await nvapiService.generateLandAnalysisResponse(newMessage, context);\n        setCurrentAnalysis(landAnalysis);\n        setLandAnalysisDialog(true);\n      }\n      \n      // Create new message\n      const newMsg: Message = {\n        id: Date.now(),\n        content: newMessage,\n        sender_id: user?.id || 1,\n        receiver_id: selectedConversation.participant.id,\n        property_id: selectedConversation.property?.id,\n        created_at: new Date().toISOString(),\n        is_read: false,\n        message_type: shouldAnalyze ? 'land_analysis' : 'response',\n        ai_enhanced: shouldAnalyze,\n        land_analysis: landAnalysis,\n        enhancement_data: enhancementData || undefined\n      };\n\n      setMessages(prev => [...prev, newMsg]);\n      setNewMessage('');\n      setEnhancementData(null);\n      setAiSuggestions([]);\n      \n      // Generate AI response if appropriate\n      if (shouldAnalyze) {\n        setTimeout(async () => {\n          try {\n            const aiResponse = await nvapiService.generateConversationResponse(\n              newMessage, \n              { \n                propertyId: selectedConversation.property?.id,\n                userId: selectedConversation.participant.id,\n                userRole: selectedConversation.participant.user_role as any\n              }\n            );\n            \n            const aiMsg: Message = {\n              id: Date.now() + 1,\n              content: aiResponse,\n              sender_id: selectedConversation.participant.id,\n              receiver_id: user?.id || 1,\n              property_id: selectedConversation.property?.id,\n              created_at: new Date().toISOString(),\n              is_read: false,\n              message_type: 'response',\n              ai_enhanced: true\n            };\n            \n            setMessages(prev => [...prev, aiMsg]);\n          } catch (error) {\n            console.error('Error generating AI response:', error);\n          }\n        }, 2000);\n      }\n      \n      setSnackbarMessage('Message sent successfully!');\n      setSnackbarOpen(true);\n    } catch (err: any) {\n      setError('Failed to send message');\n    } finally {\n      setAiAnalysisLoading(false);\n    }\n  };\n\n  const handleSuggestedResponse = (suggestion: string) => {\n    setNewMessage(suggestion);\n    setAiSuggestions([]);\n  };\n\n  const handleRequestLandAnalysis = async () => {\n    if (!selectedConversation?.property || !user) return;\n    \n    setAiAnalysisLoading(true);\n    try {\n      const context: ConversationContext = {\n        propertyId: selectedConversation.property.id,\n        userId: user.id,\n        userRole: user.user_role\n      };\n      \n      const analysis = await nvapiService.generateLandAnalysisResponse(\n        `Please provide a comprehensive land analysis for ${selectedConversation.property.location}`,\n        context\n      );\n      \n      setCurrentAnalysis(analysis);\n      setLandAnalysisDialog(true);\n    } catch (error) {\n      setError('Failed to generate land analysis');\n    } finally {\n      setAiAnalysisLoading(false);\n    }\n  };\n\n  const formatTime = (dateString: string) => {\n    return new Date(dateString).toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  const getRoleColor = (role: string) => {\n    switch (role) {\n      case 'buyer_agent':\n        return 'primary';\n      case 'seller_agent':\n        return 'secondary';\n      case 'buyer':\n        return 'info';\n      case 'seller':\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n\n  const getRoleLabel = (role: string) => {\n    switch (role) {\n      case 'buyer_agent':\n        return 'Buyer Agent';\n      case 'seller_agent':\n        return 'Seller Agent';\n      case 'buyer':\n        return 'Buyer';\n      case 'seller':\n        return 'Seller';\n      default:\n        return role;\n    }\n  };\n\n  const getDealStatusColor = (status?: string) => {\n    switch (status) {\n      case 'inquiry': return 'info';\n      case 'negotiating': return 'warning';\n      case 'offer_pending': return 'secondary';\n      case 'under_contract': return 'success';\n      case 'closed': return 'success';\n      case 'cancelled': return 'error';\n      default: return 'default';\n    }\n  };\n\n  const getDealStatusLabel = (status?: string) => {\n    switch (status) {\n      case 'inquiry': return 'Inquiry';\n      case 'negotiating': return 'Negotiating';\n      case 'offer_pending': return 'Offer Pending';\n      case 'under_contract': return 'Under Contract';\n      case 'closed': return 'Closed';\n      case 'cancelled': return 'Cancelled';\n      default: return 'General';\n    }\n  };\n\n  if (loading) {\n    return (\n      <Container maxWidth=\"xl\" sx={{ py: 4 }}>\n        <Typography>Loading messages...</Typography>\n      </Container>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"xl\" sx={{ py: 4 }}>\n      {/* Header */}\n      <Box sx={{ mb: 4 }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom sx={{ fontWeight: 'bold' }}>\n          Messages\n        </Typography>\n        <Typography variant=\"body1\" color=\"text.secondary\">\n          Communicate with agents and clients\n        </Typography>\n      </Box>\n\n      {/* Error Alert */}\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError('')}>\n          {error}\n        </Alert>\n      )}\n\n      {/* Role-based Communication Rules */}\n      {user && (\n        <Alert severity=\"info\" sx={{ mb: 3 }} icon={<AutoAwesome />}>\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n            <SmartToy color=\"primary\" />\n            <Typography variant=\"subtitle2\" sx={{ fontWeight: 'bold' }}>\n              AI-Enhanced Messaging Active\n            </Typography>\n          </Box>\n          {user.user_role === 'buyer' && \n            'Get AI-powered land analysis, market insights, and deal recommendations. Communicate directly with seller agents for property inquiries.'}\n          {user.user_role === 'seller' && \n            'Receive AI-generated property valuations and market trends. Connect with buyer agents to discuss deals and negotiations.'}\n          {user.user_role === 'buyer_agent' && \n            'Access comprehensive AI analytics for client presentations. Communicate with all parties to facilitate deals.'}\n          {user.user_role === 'seller_agent' && \n            'Leverage AI insights for competitive market analysis. Guide clients through deal negotiations with data-driven recommendations.'}\n        </Alert>\n      )}\n\n      <Grid container spacing={3} sx={{ height: 'calc(100vh - 300px)' }}>\n        {/* Conversations List */}\n        <Grid item xs={12} md={4}>\n          <Card sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n            <CardContent sx={{ pb: 0 }}>\n              <Typography variant=\"h6\" gutterBottom>\n                Conversations\n              </Typography>\n            </CardContent>\n            <List sx={{ flexGrow: 1, overflow: 'auto' }}>\n              {conversations.map((conversation) => (\n                <ListItem\n                  key={conversation.id}\n                  button\n                  selected={selectedConversation?.id === conversation.id}\n                  onClick={() => {\n                    setSelectedConversation(conversation);\n                    fetchMessages(conversation.id);\n                  }}\n                  sx={{\n                    borderRadius: 1,\n                    mx: 1,\n                    mb: 1,\n                    '&.Mui-selected': {\n                      backgroundColor: 'primary.light',\n                      '&:hover': {\n                        backgroundColor: 'primary.light',\n                      },\n                    },\n                  }}\n                >\n                  <ListItemAvatar>\n                    <Badge badgeContent={conversation.unread_count} color=\"error\">\n                      <Avatar src={conversation.participant.avatar}>\n                        {conversation.participant.first_name?.charAt(0) || \n                         conversation.participant.username.charAt(0).toUpperCase()}\n                      </Avatar>\n                    </Badge>\n                  </ListItemAvatar>\n                  <ListItemText\n                    primary={\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                        <Typography variant=\"subtitle2\">\n                          {conversation.participant.first_name} {conversation.participant.last_name}\n                        </Typography>\n                        <Chip\n                          size=\"small\"\n                          label={getRoleLabel(conversation.participant.user_role)}\n                          color={getRoleColor(conversation.participant.user_role)}\n                          variant=\"outlined\"\n                        />\n                        {conversation.deal_status && (\n                          <Chip\n                            size=\"small\"\n                            label={getDealStatusLabel(conversation.deal_status)}\n                            color={getDealStatusColor(conversation.deal_status)}\n                            variant=\"filled\"\n                          />\n                        )}\n                        {conversation.last_message.ai_enhanced && (\n                          <Tooltip title=\"AI Enhanced Conversation\">\n                            <SmartToy fontSize=\"small\" color=\"primary\" />\n                          </Tooltip>\n                        )}\n                      </Box>\n                    }\n                    secondary={\n                      <Box>\n                        {conversation.participant.company_name && (\n                          <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\">\n                            {conversation.participant.company_name}\n                          </Typography>\n                        )}\n                        {conversation.property && (\n                          <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5, mt: 0.5, mb: 0.5 }}>\n                            <Home fontSize=\"small\" color=\"action\" />\n                            <Typography variant=\"caption\" color=\"text.secondary\">\n                              {conversation.property.title}\n                            </Typography>\n                            {conversation.property.type && (\n                              <Chip\n                                size=\"small\"\n                                label={conversation.property.type}\n                                variant=\"outlined\"\n                                sx={{ height: 16, fontSize: '0.6rem' }}\n                              />\n                            )}\n                          </Box>\n                        )}\n                        <Typography variant=\"body2\" sx={{ mt: 0.5 }} noWrap>\n                          {conversation.last_message.content}\n                        </Typography>\n                        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mt: 0.5 }}>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {formatDate(conversation.last_message.created_at)}\n                          </Typography>\n                          {conversation.conversation_type && (\n                            <Chip\n                              size=\"small\"\n                              label={conversation.conversation_type.replace('_', ' ')}\n                              variant=\"outlined\"\n                              sx={{ height: 16, fontSize: '0.6rem' }}\n                              icon={\n                                conversation.conversation_type === 'land_analysis' ? <Analytics fontSize=\"small\" /> :\n                                conversation.conversation_type === 'deal_discussion' ? <TrendingUp fontSize=\"small\" /> :\n                                <Info fontSize=\"small\" />\n                              }\n                            />\n                          )}\n                        </Box>\n                      </Box>\n                    }\n                  />\n                </ListItem>\n              ))}\n            </List>\n            {/* AI Actions Toolbar */}\n            <Box sx={{ p: 2, borderTop: 1, borderColor: 'divider', backgroundColor: 'grey.50' }}>\n                  <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n                    <Tooltip title=\"Request AI Land Analysis\">\n                      <Button\n                        size=\"small\"\n                        variant=\"outlined\"\n                        startIcon={<Analytics />}\n                        onClick={handleRequestLandAnalysis}\n                        disabled={aiAnalysisLoading || !selectedConversation?.property}\n                      >\n                        Land Analysis\n                      </Button>\n                    </Tooltip>\n                    <Tooltip title=\"Get Market Insights\">\n                      <Button\n                        size=\"small\"\n                        variant=\"outlined\"\n                        startIcon={<TrendingUp />}\n                        disabled={aiAnalysisLoading}\n                      >\n                        Market Trends\n                      </Button>\n                    </Tooltip>\n                    <FormControlLabel\n                      control={\n                        <Switch\n                          checked={showAiSuggestions}\n                          onChange={(e) => setShowAiSuggestions(e.target.checked)}\n                          size=\"small\"\n                        />\n                      }\n                      label={\n                        <Typography variant=\"caption\">\n                          AI Suggestions\n                        </Typography>\n                      }\n                      sx={{ ml: 'auto' }}\n                    />\n                  </Box>\n                  {aiAnalysisLoading && (\n                    <Box sx={{ mt: 1 }}>\n                      <LinearProgress />\n                      <Typography variant=\"caption\" color=\"text.secondary\">\n                        Generating AI analysis...\n                      </Typography>\n                    </Box>\n                  )}\n                </Box>\n          </Card>\n        </Grid>\n\n        {/* Messages Area */}\n        <Grid item xs={12} md={8}>\n          {selectedConversation ? (\n            <Card sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n              {/* Chat Header */}\n              <CardContent sx={{ pb: 1, borderBottom: 1, borderColor: 'divider' }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                    <Avatar src={selectedConversation.participant.avatar}>\n                      {selectedConversation.participant.first_name?.charAt(0) || \n                       selectedConversation.participant.username.charAt(0).toUpperCase()}\n                    </Avatar>\n                    <Box>\n                      <Typography variant=\"h6\">\n                        {selectedConversation.participant.first_name} {selectedConversation.participant.last_name}\n                      </Typography>\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                        <Chip\n                          size=\"small\"\n                          label={getRoleLabel(selectedConversation.participant.user_role)}\n                          color={getRoleColor(selectedConversation.participant.user_role)}\n                          variant=\"outlined\"\n                        />\n                        {selectedConversation.participant.company_name && (\n                          <Typography variant=\"body2\" color=\"text.secondary\">\n                             {selectedConversation.participant.company_name}\n                          </Typography>\n                        )}\n                      </Box>\n                    </Box>\n                  </Box>\n                  <IconButton>\n                    <MoreVert />\n                  </IconButton>\n                </Box>\n                \n                {/* Enhanced Property Info */}\n                {selectedConversation.property && (\n                  <Box sx={{ mt: 2, p: 2, backgroundColor: 'grey.50', borderRadius: 1 }}>\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                      <Home color=\"primary\" />\n                      <Typography variant=\"subtitle2\">\n                        {selectedConversation.property.title}\n                      </Typography>\n                      {selectedConversation.deal_status && (\n                        <Chip\n                          size=\"small\"\n                          label={getDealStatusLabel(selectedConversation.deal_status)}\n                          color={getDealStatusColor(selectedConversation.deal_status)}\n                          variant=\"filled\"\n                        />\n                      )}\n                    </Box>\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1 }}>\n                      ${selectedConversation.property.price.toLocaleString()}  {selectedConversation.property.location}\n                    </Typography>\n                    {selectedConversation.property.sqft && (\n                      <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap' }}>\n                        <Typography variant=\"caption\" color=\"text.secondary\">\n                          {selectedConversation.property.sqft.toLocaleString()} sq ft\n                        </Typography>\n                        {selectedConversation.property.bedrooms && (\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {selectedConversation.property.bedrooms} bed\n                          </Typography>\n                        )}\n                        {selectedConversation.property.bathrooms && (\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            {selectedConversation.property.bathrooms} bath\n                          </Typography>\n                        )}\n                      </Box>\n                    )}\n                    <Box sx={{ display: 'flex', gap: 1, mt: 1 }}>\n                      <Button size=\"small\" startIcon={<Analytics />} onClick={handleRequestLandAnalysis}>\n                        AI Analysis\n                      </Button>\n                      <Button size=\"small\" startIcon={<TrendingUp />}>\n                        Market Data\n                      </Button>\n                    </Box>\n                  </Box>\n                )}\n              </CardContent>\n\n              {/* Enhanced Messages List */}\n              <Box sx={{ flexGrow: 1, overflow: 'auto', p: 2 }}>\n                {messages.map((message) => (\n                  <motion.div\n                    key={message.id}\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ duration: 0.2 }}\n                  >\n                    <Box\n                      sx={{\n                        display: 'flex',\n                        justifyContent: message.sender_id === user?.id ? 'flex-end' : 'flex-start',\n                        mb: 2,\n                      }}\n                    >\n                      <Box sx={{ maxWidth: '75%' }}>\n                        {/* AI Enhancement Indicator */}\n                        {message.ai_enhanced && (\n                          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1, justifyContent: message.sender_id === user?.id ? 'flex-end' : 'flex-start' }}>\n                            <SmartToy fontSize=\"small\" color=\"primary\" />\n                            <Typography variant=\"caption\" color=\"primary\">\n                              AI Enhanced\n                            </Typography>\n                          </Box>\n                        )}\n                        \n                        {/* Message Bubble */}\n                        <Paper\n                          elevation={1}\n                          sx={{\n                            p: 2,\n                            borderRadius: 2,\n                            backgroundColor: message.sender_id === user?.id ? 'primary.main' : 'grey.100',\n                            color: message.sender_id === user?.id ? 'white' : 'text.primary',\n                          }}\n                        >\n                          <Typography variant=\"body1\">\n                            {message.content}\n                          </Typography>\n                          \n                          {/* Land Analysis Preview */}\n                          {message.land_analysis && (\n                            <Box sx={{ mt: 2, p: 1, backgroundColor: 'rgba(255,255,255,0.1)', borderRadius: 1 }}>\n                              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                                <Analytics fontSize=\"small\" />\n                                <Typography variant=\"subtitle2\">\n                                  Land Analysis: {message.land_analysis.location}\n                                </Typography>\n                                <Chip\n                                  size=\"small\"\n                                  label={`Score: ${message.land_analysis.overallScore}/100`}\n                                  color={message.land_analysis.overallScore >= 80 ? 'success' : message.land_analysis.overallScore >= 60 ? 'warning' : 'error'}\n                                  variant=\"filled\"\n                                />\n                              </Box>\n                              <Typography variant=\"body2\" sx={{ opacity: 0.9, mb: 1 }}>\n                                Recommendation: <strong>{message.land_analysis.recommendation.toUpperCase()}</strong>\n                              </Typography>\n                              <Button\n                                size=\"small\"\n                                variant=\"outlined\"\n                                sx={{ color: 'inherit', borderColor: 'rgba(255,255,255,0.5)' }}\n                                onClick={() => {\n                                  setCurrentAnalysis(message.land_analysis!);\n                                  setLandAnalysisDialog(true);\n                                }}\n                              >\n                                View Full Analysis\n                              </Button>\n                            </Box>\n                          )}\n                          \n                          <Typography\n                            variant=\"caption\"\n                            sx={{\n                              display: 'block',\n                              mt: 1,\n                              opacity: 0.8,\n                              textAlign: 'right',\n                            }}\n                          >\n                            {formatTime(message.created_at)}\n                            {message.message_type && message.message_type !== 'response' && (\n                              <Chip\n                                size=\"small\"\n                                label={message.message_type.replace('_', ' ')}\n                                sx={{ ml: 1, height: 16, fontSize: '0.6rem' }}\n                                variant=\"outlined\"\n                              />\n                            )}\n                          </Typography>\n                        </Paper>\n                      </Box>\n                    </Box>\n                  </motion.div>\n                ))}\n                <div ref={messagesEndRef} />\n              </Box>\n\n              {/* Enhanced Message Input */}\n              <Box sx={{ p: 2, borderTop: 1, borderColor: 'divider' }}>\n                {/* AI Suggestions */}\n                {showAiSuggestions && aiSuggestions.length > 0 && (\n                  <Box sx={{ mb: 2 }}>\n                    <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center', gap: 0.5, mb: 1 }}>\n                      <AutoAwesome fontSize=\"small\" />\n                      AI Suggestions:\n                    </Typography>\n                    <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>\n                      {aiSuggestions.map((suggestion, index) => (\n                        <Chip\n                          key={index}\n                          label={suggestion}\n                          size=\"small\"\n                          variant=\"outlined\"\n                          onClick={() => handleSuggestedResponse(suggestion)}\n                          sx={{ cursor: 'pointer' }}\n                        />\n                      ))}\n                    </Box>\n                  </Box>\n                )}\n                \n                {/* Enhancement Indicators */}\n                {enhancementData && (\n                  <Box sx={{ mb: 2, p: 1, backgroundColor: 'info.light', borderRadius: 1, opacity: 0.8 }}>\n                    <Box sx={{ display: 'flex', gap: 2, alignItems: 'center' }}>\n                      {enhancementData.hasLandAnalysis && (\n                        <Chip\n                          size=\"small\"\n                          icon={<Analytics />}\n                          label=\"Land Analysis Available\"\n                          color=\"primary\"\n                          variant=\"outlined\"\n                        />\n                      )}\n                      {enhancementData.hasPriceAnalysis && (\n                        <Chip\n                          size=\"small\"\n                          icon={<TrendingUp />}\n                          label=\"Price Analysis Available\"\n                          color=\"secondary\"\n                          variant=\"outlined\"\n                        />\n                      )}\n                      {enhancementData.hasMarketTrends && (\n                        <Chip\n                          size=\"small\"\n                          icon={<Assessment />}\n                          label=\"Market Trends Available\"\n                          color=\"success\"\n                          variant=\"outlined\"\n                        />\n                      )}\n                    </Box>\n                  </Box>\n                )}\n                \n                <Box sx={{ display: 'flex', gap: 1, alignItems: 'flex-end' }}>\n                  <TextField\n                    fullWidth\n                    multiline\n                    maxRows={3}\n                    placeholder=\"Type your message... (Try mentioning location, analysis, or market trends for AI insights)\"\n                    value={newMessage}\n                    onChange={(e) => setNewMessage(e.target.value)}\n                    onKeyPress={(e) => {\n                      if (e.key === 'Enter' && !e.shiftKey) {\n                        e.preventDefault();\n                        handleSendMessage();\n                      }\n                    }}\n                    InputProps={{\n                      endAdornment: enhancementData && (\n                        <Tooltip title=\"AI enhancements detected\">\n                          <SmartToy color=\"primary\" fontSize=\"small\" />\n                        </Tooltip>\n                      )\n                    }}\n                  />\n                  <Tooltip title=\"Attach File\">\n                    <IconButton color=\"primary\">\n                      <AttachFile />\n                    </IconButton>\n                  </Tooltip>\n                  {enhancementData?.hasLandAnalysis && (\n                    <Tooltip title=\"Generate Land Analysis\">\n                      <IconButton color=\"secondary\" onClick={handleRequestLandAnalysis}>\n                        <Analytics />\n                      </IconButton>\n                    </Tooltip>\n                  )}\n                  <Button\n                    variant=\"contained\"\n                    endIcon={aiAnalysisLoading ? <SmartToy /> : <Send />}\n                    onClick={handleSendMessage}\n                    disabled={!newMessage.trim() || aiAnalysisLoading}\n                  >\n                    {aiAnalysisLoading ? 'Analyzing...' : 'Send'}\n                  </Button>\n                </Box>\n              </Box>\n            </Card>\n          ) : (\n            <Card sx={{ height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n              <Box sx={{ textAlign: 'center' }}>\n                <Typography variant=\"h6\" color=\"text.secondary\">\n                  Select a conversation to start messaging\n                </Typography>\n              </Box>\n            </Card>\n          )}\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default MessagesPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}