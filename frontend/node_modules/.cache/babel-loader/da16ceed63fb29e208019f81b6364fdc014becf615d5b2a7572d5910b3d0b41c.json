{"ast":null,"code":"import _objectSpread from\"D:/py/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Box,Container,Typography,Grid,Card,CardContent,TextField,Button,Paper,Chip,Alert,CircularProgress,Slider,List,ListItem,ListItemText,ListItemIcon,Accordion,AccordionSummary,AccordionDetails,LinearProgress,Tooltip,IconButton}from'@mui/material';import{Assessment,LocationOn,TuneRounded,School,LocalPolice,Park,DirectionsCar,AttachMoney,ExpandMore,Info,Psychology,TrendingUp,Star}from'@mui/icons-material';import{useForm,Controller}from'react-hook-form';import{motion}from'framer-motion';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BeneficiaryScoringPage=()=>{const[loading,setLoading]=useState(false);const[result,setResult]=useState(null);const{control,handleSubmit,formState:{errors},watch}=useForm({defaultValues:{custom_weights:{value:8.0,school:8.0,crime_inv:6.0,env_inv:5.0,employer_proximity:7.0}}});const weights=watch('custom_weights');const onSubmit=async data=>{setLoading(true);try{// Simulate API call\nawait new Promise(resolve=>setTimeout(resolve,1500));// Mock result\nconst mockResult={id:Math.floor(Math.random()*10000),overall_score:65+Math.random()*30,value_score:70+Math.random()*25,school_score:80+Math.random()*20,safety_score:60+Math.random()*30,environmental_score:85+Math.random()*15,accessibility_score:75+Math.random()*20,scoring_weights:data.custom_weights,score_components:{value:data.custom_weights.value*(0.7+Math.random()*0.3),school:data.custom_weights.school*(0.8+Math.random()*0.2),crime:data.custom_weights.crime_inv*(0.6+Math.random()*0.3),env:data.custom_weights.env_inv*(0.85+Math.random()*0.15),employer:data.custom_weights.employer_proximity*(0.75+Math.random()*0.2)},calculated_at:new Date().toISOString(),model_version:'2.0.0',explanation:{overall_score:78.2,component_explanations:[{component:'school',raw_score:85.0,weight:data.custom_weights.school,weighted_contribution:6.8,description:\"School quality and accessibility: excellent (85.0%) with weight \".concat(data.custom_weights.school)},{component:'value',raw_score:75.0,weight:data.custom_weights.value,weighted_contribution:6.0,description:\"Property value competitiveness: good (75.0%) with weight \".concat(data.custom_weights.value)},{component:'safety',raw_score:70.0,weight:data.custom_weights.crime_inv,weighted_contribution:4.2,description:\"Safety and crime levels: good (70.0%) with weight \".concat(data.custom_weights.crime_inv)},{component:'environment',raw_score:88.0,weight:data.custom_weights.env_inv,weighted_contribution:4.4,description:\"Environmental risk factors: excellent (88.0%) with weight \".concat(data.custom_weights.env_inv)},{component:'accessibility',raw_score:72.0,weight:data.custom_weights.employer_proximity,weighted_contribution:5.04,description:\"Employment and economic opportunities: good (72.0%) with weight \".concat(data.custom_weights.employer_proximity)}]}};setResult(mockResult);toast.success('Beneficiary scoring completed successfully!');}catch(error){toast.error('Failed to calculate beneficiary score. Please try again.');}finally{setLoading(false);}};const getScoreColor=score=>{if(score>=80)return'#10b981';if(score>=60)return'#f59e0b';if(score>=40)return'#f97316';return'#ef4444';};const getScoreLabel=score=>{if(score>=80)return'Excellent';if(score>=60)return'Good';if(score>=40)return'Fair';return'Poor';};const scoreComponents=[{key:'value_score',label:'Value Competitiveness',icon:/*#__PURE__*/_jsx(AttachMoney,{}),description:'Property value vs market'},{key:'school_score',label:'School Quality',icon:/*#__PURE__*/_jsx(School,{}),description:'Education accessibility & quality'},{key:'safety_score',label:'Safety & Security',icon:/*#__PURE__*/_jsx(LocalPolice,{}),description:'Crime rates & safety metrics'},{key:'environmental_score',label:'Environmental',icon:/*#__PURE__*/_jsx(Park,{}),description:'Environmental risks & quality'},{key:'accessibility_score',label:'Accessibility',icon:/*#__PURE__*/_jsx(DirectionsCar,{}),description:'Transportation & amenities'}];return/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",sx:{py:4},children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5},children:/*#__PURE__*/_jsxs(Box,{sx:{mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h1\",gutterBottom:true,sx:{fontWeight:700,color:'#1e293b'},children:\"\\uD83C\\uDFAF Beneficiary Scoring\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",sx:{mb:2},children:\"Multi-factor investment attractiveness scoring with custom weights\"}),/*#__PURE__*/_jsxs(Alert,{severity:\"info\",sx:{mb:3},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Customizable Weights:\"}),\" Adjust the importance of each factor based on your investment priorities and risk tolerance.\"]})]})}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,lg:5,children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:0.5,delay:0.1},children:[/*#__PURE__*/_jsx(Card,{sx:{mb:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(LocationOn,{sx:{mr:1}}),\"Property Location\"]}),/*#__PURE__*/_jsx(Box,{component:\"form\",onSubmit:handleSubmit(onSubmit),sx:{mt:2},children:/*#__PURE__*/_jsx(Controller,{name:\"address\",control:control,rules:{required:'Address is required'},render:_ref=>{var _errors$address;let{field}=_ref;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,label:\"Property Address\",placeholder:\"123 Main St, City, State\",error:!!errors.address,helperText:(_errors$address=errors.address)===null||_errors$address===void 0?void 0:_errors$address.message,sx:{mb:3},InputProps:{startAdornment:/*#__PURE__*/_jsx(LocationOn,{sx:{mr:1,color:'text.secondary'}})}}));}})})]})}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(TuneRounded,{sx:{mr:1}}),\"Scoring Weights\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mb:3},children:\"Adjust the importance of each factor (1-10 scale)\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(AttachMoney,{sx:{mr:1,fontSize:20}}),\"Value Competitiveness: \",weights.value]}),/*#__PURE__*/_jsx(Controller,{name:\"custom_weights.value\",control:control,render:_ref2=>{let{field}=_ref2;return/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},field),{},{min:1,max:10,step:0.5,marks:true,valueLabelDisplay:\"auto\",sx:{color:'#2563eb'}}));}})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(School,{sx:{mr:1,fontSize:20}}),\"School Quality: \",weights.school]}),/*#__PURE__*/_jsx(Controller,{name:\"custom_weights.school\",control:control,render:_ref3=>{let{field}=_ref3;return/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},field),{},{min:1,max:10,step:0.5,marks:true,valueLabelDisplay:\"auto\",sx:{color:'#10b981'}}));}})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(LocalPolice,{sx:{mr:1,fontSize:20}}),\"Safety & Security: \",weights.crime_inv]}),/*#__PURE__*/_jsx(Controller,{name:\"custom_weights.crime_inv\",control:control,render:_ref4=>{let{field}=_ref4;return/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},field),{},{min:1,max:10,step:0.5,marks:true,valueLabelDisplay:\"auto\",sx:{color:'#f59e0b'}}));}})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Park,{sx:{mr:1,fontSize:20}}),\"Environmental Quality: \",weights.env_inv]}),/*#__PURE__*/_jsx(Controller,{name:\"custom_weights.env_inv\",control:control,render:_ref5=>{let{field}=_ref5;return/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},field),{},{min:1,max:10,step:0.5,marks:true,valueLabelDisplay:\"auto\",sx:{color:'#10b981'}}));}})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(DirectionsCar,{sx:{mr:1,fontSize:20}}),\"Accessibility: \",weights.employer_proximity]}),/*#__PURE__*/_jsx(Controller,{name:\"custom_weights.employer_proximity\",control:control,render:_ref6=>{let{field}=_ref6;return/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},field),{},{min:1,max:10,step:0.5,marks:true,valueLabelDisplay:\"auto\",sx:{color:'#8b5cf6'}}));}})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",size:\"large\",fullWidth:true,disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(Assessment,{}),sx:{py:1.5},onClick:handleSubmit(onSubmit),children:loading?'Calculating Score...':'Calculate Beneficiary Score'})})]})]})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,lg:7,children:result?/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:0.5},children:[/*#__PURE__*/_jsx(Card,{sx:{mb:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Star,{sx:{mr:1}}),\"Overall Investment Score\"]}),/*#__PURE__*/_jsxs(Paper,{sx:{p:4,textAlign:'center',bgcolor:'#f0f9ff',mb:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h2\",sx:{fontWeight:700,color:getScoreColor(result.overall_score)},children:result.overall_score.toFixed(1)}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"text.secondary\",children:\"out of 100\"}),/*#__PURE__*/_jsx(Chip,{label:getScoreLabel(result.overall_score),sx:{mt:2,bgcolor:getScoreColor(result.overall_score),color:'white',fontWeight:600,fontSize:'1rem',px:2,py:1}})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,sx:{fontWeight:600,mt:3},children:\"Score Breakdown\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:scoreComponents.map(component=>{const score=result[component.key];return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[component.icon,/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{ml:1,fontWeight:600},children:component.label})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:1},children:[/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:score,sx:{flexGrow:1,height:8,borderRadius:4,bgcolor:'#e2e8f0','& .MuiLinearProgress-bar':{bgcolor:getScoreColor(score)}}}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{ml:2,fontWeight:600,minWidth:40},children:score.toFixed(1)})]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:component.description})]})},component.key);})})]})}),result.explanation&&/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'space-between',mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Psychology,{sx:{mr:1}}),\"Scoring Explanation\"]}),/*#__PURE__*/_jsx(Tooltip,{title:\"Detailed breakdown of how each component contributes to the overall score\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",children:/*#__PURE__*/_jsx(Info,{})})})]}),/*#__PURE__*/_jsxs(Accordion,{defaultExpanded:true,children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMore,{}),children:/*#__PURE__*/_jsx(Typography,{sx:{fontWeight:600},children:\"\\uD83D\\uDCCA Component Contributions\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(List,{children:result.explanation.component_explanations.sort((a,b)=>b.weighted_contribution-a.weighted_contribution).map((component,index)=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(TrendingUp,{sx:{color:getScoreColor(component.raw_score)}})}),/*#__PURE__*/_jsx(ListItemText,{primary:component.description,secondary:\"Weighted contribution: \".concat(component.weighted_contribution.toFixed(2),\" points\")})]},index))})})]})]})})]}):/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0.5},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:6,textAlign:'center',bgcolor:'#f8fafc'},children:[/*#__PURE__*/_jsx(Assessment,{sx:{fontSize:80,color:'#cbd5e1',mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"text.secondary\",gutterBottom:true,children:\"Ready for Beneficiary Scoring\"}),/*#__PURE__*/_jsx(Typography,{color:\"text.secondary\",children:\"Enter property location and adjust scoring weights to get investment attractiveness analysis\"})]})})})]})]});};export default BeneficiaryScoringPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}