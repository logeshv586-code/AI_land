{"ast":null,"code":"import _objectSpread from\"D:/py/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Box,Container,Typography,Grid,Card,CardContent,TextField,Button,Paper,Chip,Alert,CircularProgress,List,ListItem,ListItemText,ListItemIcon,Accordion,AccordionSummary,AccordionDetails,Tooltip,IconButton}from'@mui/material';import{AttachMoney,LocationOn,Home,CalendarToday,SquareFoot,TrendingUp,Assessment,ExpandMore,Info,Psychology,Speed,Security,Timeline,ShowChart}from'@mui/icons-material';import{useForm,Controller}from'react-hook-form';import{motion}from'framer-motion';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PropertyValuationPage=()=>{const[loading,setLoading]=useState(false);const[result,setResult]=useState(null);const[showExplanation,setShowExplanation]=useState(false);const{control,handleSubmit,formState:{errors},reset}=useForm({defaultValues:{property_type:'residential',beds:3,baths:2,sqft:1500,year_built:2000,lot_size:0.25}});const onSubmit=async data=>{setLoading(true);try{// Simulate API call\nawait new Promise(resolve=>setTimeout(resolve,2000));// Mock result\nconst mockResult={id:Math.floor(Math.random()*10000),predicted_value:275000+Math.random()*100000,value_uncertainty:15000+Math.random()*10000,price_per_sqft:183.33,comparable_sales_count:12,days_on_market_avg:45.5,valuation_date:new Date().toISOString(),confidence_score:0.85+Math.random()*0.1,explanation:{base_value:192500,prediction_value:275000,top_positive_features:[{feature_name:'sqft',attribution_value:45000,feature_value:data.sqft,impact_description:\"Property size (\".concat(data.sqft,\" sq ft) increases property value by $45,000\")},{feature_name:'location',attribution_value:25000,feature_value:0.85,impact_description:'Excellent location increases property value by $25,000'},{feature_name:'beds',attribution_value:12000,feature_value:data.beds,impact_description:\"\".concat(data.beds,\" bedrooms increases property value by $12,000\")}],top_negative_features:[{feature_name:'age',attribution_value:-8000,feature_value:2024-data.year_built,impact_description:\"Property age (\".concat(2024-data.year_built,\" years) decreases property value by $8,000\")}]}};setResult(mockResult);toast.success('Property valuation completed successfully!');}catch(error){toast.error('Failed to get property valuation. Please try again.');}finally{setLoading(false);}};const formatCurrency=value=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:0,maximumFractionDigits:0}).format(value);};const getConfidenceColor=confidence=>{if(confidence>=0.8)return'#10b981';if(confidence>=0.6)return'#f59e0b';return'#ef4444';};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",sx:{py:4},children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5},children:/*#__PURE__*/_jsxs(Box,{sx:{mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h1\",gutterBottom:true,sx:{fontWeight:700,color:'#1e293b'},children:\"\\uD83D\\uDCB0 Property Valuation (AVM)\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",sx:{mb:2},children:\"AI-powered automated valuation model with uncertainty estimation\"}),/*#__PURE__*/_jsxs(Alert,{severity:\"info\",sx:{mb:3},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Advanced ML:\"}),\" Our RandomForest model analyzes 40+ features to provide accurate property valuations with confidence intervals.\"]})]})}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,lg:5,children:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:0.5,delay:0.1},children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Home,{sx:{mr:1}}),\"Property Details\"]}),/*#__PURE__*/_jsx(Box,{component:\"form\",onSubmit:handleSubmit(onSubmit),sx:{mt:2},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Controller,{name:\"address\",control:control,rules:{required:'Address is required'},render:_ref=>{var _errors$address;let{field}=_ref;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,label:\"Property Address\",placeholder:\"123 Main St, City, State\",error:!!errors.address,helperText:(_errors$address=errors.address)===null||_errors$address===void 0?void 0:_errors$address.message,InputProps:{startAdornment:/*#__PURE__*/_jsx(LocationOn,{sx:{mr:1,color:'text.secondary'}})}}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"beds\",control:control,rules:{required:'Bedrooms is required',min:1},render:_ref2=>{var _errors$beds;let{field}=_ref2;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Bedrooms\",error:!!errors.beds,helperText:(_errors$beds=errors.beds)===null||_errors$beds===void 0?void 0:_errors$beds.message}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"baths\",control:control,rules:{required:'Bathrooms is required',min:1},render:_ref3=>{var _errors$baths;let{field}=_ref3;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Bathrooms\",error:!!errors.baths,helperText:(_errors$baths=errors.baths)===null||_errors$baths===void 0?void 0:_errors$baths.message}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"sqft\",control:control,rules:{required:'Square footage is required',min:100},render:_ref4=>{var _errors$sqft;let{field}=_ref4;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Square Feet\",error:!!errors.sqft,helperText:(_errors$sqft=errors.sqft)===null||_errors$sqft===void 0?void 0:_errors$sqft.message,InputProps:{startAdornment:/*#__PURE__*/_jsx(SquareFoot,{sx:{mr:1,color:'text.secondary'}})}}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"year_built\",control:control,rules:{required:'Year built is required',min:1800,max:new Date().getFullYear()},render:_ref5=>{var _errors$year_built;let{field}=_ref5;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Year Built\",error:!!errors.year_built,helperText:(_errors$year_built=errors.year_built)===null||_errors$year_built===void 0?void 0:_errors$year_built.message,InputProps:{startAdornment:/*#__PURE__*/_jsx(CalendarToday,{sx:{mr:1,color:'text.secondary'}})}}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Controller,{name:\"lot_size\",control:control,render:_ref6=>{let{field}=_ref6;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Lot Size (acres)\",placeholder:\"0.25\",inputProps:{step:0.01}}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",size:\"large\",fullWidth:true,disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(Assessment,{}),sx:{py:1.5},children:loading?'Analyzing Property...':'Get Property Valuation'})})]})})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,lg:7,children:result?/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:0.5},children:[/*#__PURE__*/_jsx(Card,{sx:{mb:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(AttachMoney,{sx:{mr:1}}),\"Valuation Result\"]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3,textAlign:'center',bgcolor:'#f0f9ff'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",sx:{fontWeight:700,color:'#0369a1'},children:formatCurrency(result.predicted_value)}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",children:\"Estimated Value\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mt:1},children:[\"\\xB1 \",formatCurrency(result.value_uncertainty),\" uncertainty\"]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(List,{dense:true,children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(SquareFoot,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Price per sq ft\",secondary:\"$\".concat(result.price_per_sqft.toFixed(2))})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Timeline,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Comparable Sales\",secondary:\"\".concat(result.comparable_sales_count,\" properties\")})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Speed,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Avg Days on Market\",secondary:\"\".concat(result.days_on_market_avg,\" days\")})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Security,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Confidence Score\",secondary:/*#__PURE__*/_jsx(Chip,{label:\"\".concat((result.confidence_score*100).toFixed(1),\"%\"),size:\"small\",sx:{bgcolor:getConfidenceColor(result.confidence_score),color:'white',fontWeight:600}})})]})]})})]})]})}),result.explanation&&/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'space-between',mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Psychology,{sx:{mr:1}}),\"AI Explanation\"]}),/*#__PURE__*/_jsx(Tooltip,{title:\"SHAP-based feature attributions explain how each property characteristic affects the valuation\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",children:/*#__PURE__*/_jsx(Info,{})})})]}),/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMore,{}),children:/*#__PURE__*/_jsx(Typography,{sx:{fontWeight:600},children:\"\\uD83D\\uDE80 Value Drivers (What increases property value)\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(List,{children:result.explanation.top_positive_features.map((feature,index)=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(TrendingUp,{sx:{color:'#10b981'}})}),/*#__PURE__*/_jsx(ListItemText,{primary:feature.impact_description,secondary:\"Attribution: +\".concat(formatCurrency(feature.attribution_value))})]},index))})})]}),/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMore,{}),children:/*#__PURE__*/_jsx(Typography,{sx:{fontWeight:600},children:\"\\u26A0\\uFE0F Value Detractors (What decreases property value)\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsx(List,{children:result.explanation.top_negative_features.map((feature,index)=>/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(ShowChart,{sx:{color:'#ef4444',transform:'rotate(180deg)'}})}),/*#__PURE__*/_jsx(ListItemText,{primary:feature.impact_description,secondary:\"Attribution: \".concat(formatCurrency(feature.attribution_value))})]},index))})})]})]})})]}):/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0.5},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:6,textAlign:'center',bgcolor:'#f8fafc'},children:[/*#__PURE__*/_jsx(AttachMoney,{sx:{fontSize:80,color:'#cbd5e1',mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"text.secondary\",gutterBottom:true,children:\"Ready for Property Valuation\"}),/*#__PURE__*/_jsx(Typography,{color:\"text.secondary\",children:\"Enter property details to get an AI-powered valuation with detailed explanations\"})]})})})]})]});};export default PropertyValuationPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}