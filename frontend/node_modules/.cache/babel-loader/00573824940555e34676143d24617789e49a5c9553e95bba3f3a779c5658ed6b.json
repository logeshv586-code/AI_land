{"ast":null,"code":"import _objectSpread from\"D:/py/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Box,Container,Typography,Grid,Card,CardContent,TextField,Button,Paper,Chip,Alert,CircularProgress,FormControl,InputLabel,Select,MenuItem,Avatar,IconButton,Tooltip,Slider,Switch,FormControlLabel}from'@mui/material';import{Recommend,LocationOn,Favorite,Share,MoreVert,FilterList,Search}from'@mui/icons-material';import{useForm,Controller}from'react-hook-form';import{motion}from'framer-motion';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PropertyRecommendationsPage=()=>{const[loading,setLoading]=useState(false);const[results,setResults]=useState([]);const[showFilters,setShowFilters]=useState(false);const{control,handleSubmit,formState:{errors},watch}=useForm({defaultValues:{search_type:'location',radius_km:10,max_recommendations:10,recommendation_type:'hybrid',user_preferences:{min_beds:2,max_beds:5,min_baths:1,max_baths:4,min_price:100000,max_price:1000000,property_type:'residential',min_sqft:800,max_sqft:4000}}});const searchType=watch('search_type');const preferences=watch('user_preferences');const onSubmit=async data=>{setLoading(true);try{// Simulate API call\nawait new Promise(resolve=>setTimeout(resolve,2500));// Mock results\nconst mockResults=Array.from({length:data.max_recommendations},(_,index)=>({id:index+1,recommended_property:{id:Math.floor(Math.random()*10000),predicted_value:200000+Math.random()*500000,beds:Math.floor(Math.random()*4)+2,baths:Math.floor(Math.random()*3)+1,sqft:Math.floor(Math.random()*2000)+1000,year_built:Math.floor(Math.random()*50)+1970,address:\"\".concat(Math.floor(Math.random()*9999)+1,\" \").concat(['Main','Oak','Pine','Elm','Cedar'][Math.floor(Math.random()*5)],\" St, \").concat(['Chicago','Austin','Denver','Seattle','Portland'][Math.floor(Math.random()*5)],\", \").concat(['IL','TX','CO','WA','OR'][Math.floor(Math.random()*5)]),property_type:'residential'},recommendation_type:data.recommendation_type,similarity_score:0.6+Math.random()*0.4,confidence_score:0.7+Math.random()*0.3,rank_position:index+1,recommendation_reason:['Similar property characteristics','Great investment potential','Excellent location match','Strong market performance','High user rating similarity'][Math.floor(Math.random()*5)],created_at:new Date().toISOString()})).sort((a,b)=>b.similarity_score-a.similarity_score);setResults(mockResults);toast.success(\"Found \".concat(mockResults.length,\" property recommendations!\"));}catch(error){toast.error('Failed to get property recommendations. Please try again.');}finally{setLoading(false);}};const formatCurrency=value=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:0,maximumFractionDigits:0}).format(value);};const getConfidenceColor=confidence=>{if(confidence>=0.8)return'#10b981';if(confidence>=0.6)return'#f59e0b';return'#ef4444';};const getSimilarityColor=similarity=>{if(similarity>=0.8)return'#2563eb';if(similarity>=0.6)return'#10b981';return'#f59e0b';};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",sx:{py:4},children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5},children:/*#__PURE__*/_jsxs(Box,{sx:{mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h1\",gutterBottom:true,sx:{fontWeight:700,color:'#1e293b'},children:\"\\uD83C\\uDFAF Property Recommendations\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",sx:{mb:2},children:\"Hybrid ML-powered property recommendations and similarity analysis\"}),/*#__PURE__*/_jsxs(Alert,{severity:\"info\",sx:{mb:3},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Hybrid AI:\"}),\" Combines content-based filtering (property characteristics) with collaborative filtering (user behavior) for optimal recommendations.\"]})]})}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,lg:4,children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:0.5,delay:0.1},children:[/*#__PURE__*/_jsx(Card,{sx:{mb:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",gutterBottom:true,sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Search,{sx:{mr:1}}),\"Search Criteria\"]}),/*#__PURE__*/_jsx(Box,{component:\"form\",onSubmit:handleSubmit(onSubmit),sx:{mt:2},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Controller,{name:\"search_type\",control:control,render:_ref=>{let{field}=_ref;return/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Search Type\"}),/*#__PURE__*/_jsxs(Select,_objectSpread(_objectSpread({},field),{},{label:\"Search Type\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"location\",children:\"By Location\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"property\",children:\"By Similar Property\"})]}))]});}})}),searchType==='location'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Controller,{name:\"address\",control:control,rules:{required:'Address is required for location search'},render:_ref2=>{var _errors$address;let{field}=_ref2;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,label:\"Search Location\",placeholder:\"123 Main St, City, State\",error:!!errors.address,helperText:(_errors$address=errors.address)===null||_errors$address===void 0?void 0:_errors$address.message,InputProps:{startAdornment:/*#__PURE__*/_jsx(LocationOn,{sx:{mr:1,color:'text.secondary'}})}}));}})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,sx:{fontWeight:600},children:[\"Search Radius: \",watch('radius_km'),\" km\"]}),/*#__PURE__*/_jsx(Controller,{name:\"radius_km\",control:control,render:_ref3=>{let{field}=_ref3;return/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},field),{},{min:1,max:50,step:1,marks:[{value:1,label:'1km'},{value:25,label:'25km'},{value:50,label:'50km'}],valueLabelDisplay:\"auto\",sx:{color:'#2563eb'}}));}})]})]}),searchType==='property'&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Controller,{name:\"property_id\",control:control,rules:{required:'Property ID is required for property search'},render:_ref4=>{var _errors$property_id;let{field}=_ref4;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Property ID\",placeholder:\"Enter property ID\",error:!!errors.property_id,helperText:(_errors$property_id=errors.property_id)===null||_errors$property_id===void 0?void 0:_errors$property_id.message}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Controller,{name:\"recommendation_type\",control:control,render:_ref5=>{let{field}=_ref5;return/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Recommendation Algorithm\"}),/*#__PURE__*/_jsxs(Select,_objectSpread(_objectSpread({},field),{},{label:\"Recommendation Algorithm\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"content_based\",children:\"Content-Based\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"collaborative\",children:\"Collaborative Filtering\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"hybrid\",children:\"Hybrid (Recommended)\"})]}))]});}})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,sx:{fontWeight:600},children:[\"Max Results: \",watch('max_recommendations')]}),/*#__PURE__*/_jsx(Controller,{name:\"max_recommendations\",control:control,render:_ref6=>{let{field}=_ref6;return/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},field),{},{min:5,max:50,step:5,marks:true,valueLabelDisplay:\"auto\",sx:{color:'#10b981'}}));}})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",size:\"large\",fullWidth:true,disabled:loading,startIcon:loading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(Recommend,{}),sx:{py:1.5},children:loading?'Finding Recommendations...':'Get Recommendations'})})]})})]})}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'space-between',mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",sx:{fontWeight:600,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(FilterList,{sx:{mr:1}}),\"Preferences\"]}),/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:showFilters,onChange:e=>setShowFilters(e.target.checked)}),label:\"Advanced\"})]}),showFilters&&/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"user_preferences.min_beds\",control:control,render:_ref7=>{let{field}=_ref7;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Min Beds\",size:\"small\"}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"user_preferences.max_beds\",control:control,render:_ref8=>{let{field}=_ref8;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Max Beds\",size:\"small\"}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"user_preferences.min_price\",control:control,render:_ref9=>{let{field}=_ref9;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Min Price\",size:\"small\"}));}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,children:/*#__PURE__*/_jsx(Controller,{name:\"user_preferences.max_price\",control:control,render:_ref0=>{let{field}=_ref0;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{fullWidth:true,type:\"number\",label:\"Max Price\",size:\"small\"}));}})})]})]})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,lg:8,children:results.length>0?/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:0.5},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",gutterBottom:true,sx:{fontWeight:600,mb:3},children:[\"\\uD83C\\uDFE0 Found \",results.length,\" Recommendations\"]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:results.map((recommendation,index)=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.3,delay:index*0.1},children:/*#__PURE__*/_jsx(Card,{sx:{'&:hover':{boxShadow:4},transition:'box-shadow 0.2s'},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:1,children:/*#__PURE__*/_jsxs(Avatar,{sx:{bgcolor:getSimilarityColor(recommendation.similarity_score),fontWeight:700,fontSize:'1.2rem'},children:[\"#\",recommendation.rank_position]})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontWeight:600,mb:1},children:recommendation.recommended_property.address}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1,mb:2},children:[/*#__PURE__*/_jsx(Chip,{label:\"\".concat(recommendation.recommended_property.beds,\" bed\"),size:\"small\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Chip,{label:\"\".concat(recommendation.recommended_property.baths,\" bath\"),size:\"small\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Chip,{label:\"\".concat(recommendation.recommended_property.sqft.toLocaleString(),\" sqft\"),size:\"small\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Chip,{label:recommendation.recommended_property.year_built,size:\"small\",variant:\"outlined\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:recommendation.recommendation_reason})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{fontWeight:700,color:'#2563eb',mb:1},children:formatCurrency(recommendation.recommended_property.predicted_value)}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1,mb:1},children:[/*#__PURE__*/_jsx(Chip,{label:\"\".concat((recommendation.similarity_score*100).toFixed(0),\"% match\"),size:\"small\",sx:{bgcolor:getSimilarityColor(recommendation.similarity_score),color:'white',fontWeight:600}}),/*#__PURE__*/_jsx(Chip,{label:\"\".concat((recommendation.confidence_score*100).toFixed(0),\"% confidence\"),size:\"small\",sx:{bgcolor:getConfidenceColor(recommendation.confidence_score),color:'white',fontWeight:600}})]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:recommendation.recommendation_type.replace('_',' ')})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:2,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:1},children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Save to favorites\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",children:/*#__PURE__*/_jsx(Favorite,{})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Share property\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",children:/*#__PURE__*/_jsx(Share,{})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"More options\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",children:/*#__PURE__*/_jsx(MoreVert,{})})})]})})]})})})})},recommendation.id))})]}):/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0.5},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:6,textAlign:'center',bgcolor:'#f8fafc'},children:[/*#__PURE__*/_jsx(Recommend,{sx:{fontSize:80,color:'#cbd5e1',mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"text.secondary\",gutterBottom:true,children:\"Ready for Property Recommendations\"}),/*#__PURE__*/_jsx(Typography,{color:\"text.secondary\",children:\"Enter search criteria to get AI-powered property recommendations tailored to your preferences\"})]})})})]})]});};export default PropertyRecommendationsPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}