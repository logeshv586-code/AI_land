{"ast":null,"code":"import React,{useState}from'react';import{AppBar,Box,CssBaseline,Drawer,IconButton,List,ListItem,ListItemButton,ListItemIcon,ListItemText,Toolbar,Typography,Avatar,Menu,MenuItem,Divider,Badge}from'@mui/material';import{Menu as MenuIcon,Dashboard,Analytics,History,Compare,Settings,AdminPanelSettings,Logout,AccountCircle,Notifications,AutoAwesome,AttachMoney,Assessment,Recommend,ExpandMore,ExpandLess}from'@mui/icons-material';import{useNavigate,useLocation}from'react-router-dom';import{useAuth}from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const drawerWidth=240;const Layout=_ref=>{var _menuItems$find,_automationItems$find,_user$username;let{children}=_ref;const[mobileOpen,setMobileOpen]=useState(false);const[anchorEl,setAnchorEl]=useState(null);const[automationExpanded,setAutomationExpanded]=useState(false);const{user,logout}=useAuth();const navigate=useNavigate();const location=useLocation();const handleDrawerToggle=()=>{setMobileOpen(!mobileOpen);};const handleProfileMenuOpen=event=>{setAnchorEl(event.currentTarget);};const handleProfileMenuClose=()=>{setAnchorEl(null);};const handleLogout=()=>{logout();handleProfileMenuClose();navigate('/login');};const menuItems=[{text:'Dashboard',icon:/*#__PURE__*/_jsx(Dashboard,{}),path:'/dashboard'},{text:'New Analysis',icon:/*#__PURE__*/_jsx(Analytics,{}),path:'/analysis'},{text:'History',icon:/*#__PURE__*/_jsx(History,{}),path:'/history'},{text:'Compare',icon:/*#__PURE__*/_jsx(Compare,{}),path:'/compare'},{text:'Settings',icon:/*#__PURE__*/_jsx(Settings,{}),path:'/settings'}];const automationItems=[{text:'Automation Hub',icon:/*#__PURE__*/_jsx(AutoAwesome,{}),path:'/automation'},{text:'Property Valuation',icon:/*#__PURE__*/_jsx(AttachMoney,{}),path:'/automation/valuation'},{text:'Beneficiary Scoring',icon:/*#__PURE__*/_jsx(Assessment,{}),path:'/automation/scoring'},{text:'Recommendations',icon:/*#__PURE__*/_jsx(Recommend,{}),path:'/automation/recommendations'}];// Add admin menu item if user is admin\nif(user!==null&&user!==void 0&&user.is_admin){menuItems.push({text:'Admin Panel',icon:/*#__PURE__*/_jsx(AdminPanelSettings,{}),path:'/admin'});}// Check if current path is in automation section\nconst isAutomationActive=location.pathname.startsWith('/automation');const drawer=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",noWrap:true,component:\"div\",sx:{fontWeight:'bold'},children:\"Land Analysis AI\"})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(List,{children:menuItems.map(item=>/*#__PURE__*/_jsx(ListItem,{disablePadding:true,children:/*#__PURE__*/_jsxs(ListItemButton,{selected:location.pathname===item.path,onClick:()=>{navigate(item.path);setMobileOpen(false);},sx:{'&.Mui-selected':{backgroundColor:'primary.main',color:'white','&:hover':{backgroundColor:'primary.dark'},'& .MuiListItemIcon-root':{color:'white'}}},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:item.icon}),/*#__PURE__*/_jsx(ListItemText,{primary:item.text})]})},item.text))}),/*#__PURE__*/_jsx(Divider,{sx:{my:1}}),/*#__PURE__*/_jsxs(List,{children:[/*#__PURE__*/_jsx(ListItem,{disablePadding:true,children:/*#__PURE__*/_jsxs(ListItemButton,{selected:isAutomationActive,onClick:()=>{setAutomationExpanded(!automationExpanded);if(!isAutomationActive){navigate('/automation');setMobileOpen(false);}},sx:{'&.Mui-selected':{backgroundColor:'secondary.main',color:'white','&:hover':{backgroundColor:'secondary.dark'},'& .MuiListItemIcon-root':{color:'white'}}},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(AutoAwesome,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"\\uD83E\\uDD16 Automation\"}),automationExpanded||isAutomationActive?/*#__PURE__*/_jsx(ExpandLess,{}):/*#__PURE__*/_jsx(ExpandMore,{})]})}),(automationExpanded||isAutomationActive)&&automationItems.map(item=>/*#__PURE__*/_jsx(ListItem,{disablePadding:true,sx:{pl:2},children:/*#__PURE__*/_jsxs(ListItemButton,{selected:location.pathname===item.path,onClick:()=>{navigate(item.path);setMobileOpen(false);},sx:{'&.Mui-selected':{backgroundColor:'secondary.light',color:'white','&:hover':{backgroundColor:'secondary.main'},'& .MuiListItemIcon-root':{color:'white'}}},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:item.icon}),/*#__PURE__*/_jsx(ListItemText,{primary:item.text})]})},item.text))]})]});return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex'},children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(AppBar,{position:\"fixed\",sx:{width:{sm:\"calc(100% - \".concat(drawerWidth,\"px)\")},ml:{sm:\"\".concat(drawerWidth,\"px\")}},children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",\"aria-label\":\"open drawer\",edge:\"start\",onClick:handleDrawerToggle,sx:{mr:2,display:{sm:'none'}},children:/*#__PURE__*/_jsx(MenuIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",noWrap:true,component:\"div\",sx:{flexGrow:1},children:((_menuItems$find=menuItems.find(item=>item.path===location.pathname))===null||_menuItems$find===void 0?void 0:_menuItems$find.text)||((_automationItems$find=automationItems.find(item=>item.path===location.pathname))===null||_automationItems$find===void 0?void 0:_automationItems$find.text)||'Land Analysis AI'}),/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",sx:{mr:1},children:/*#__PURE__*/_jsx(Badge,{badgeContent:0,color:\"error\",children:/*#__PURE__*/_jsx(Notifications,{})})}),/*#__PURE__*/_jsx(IconButton,{size:\"large\",edge:\"end\",\"aria-label\":\"account of current user\",\"aria-controls\":\"primary-search-account-menu\",\"aria-haspopup\":\"true\",onClick:handleProfileMenuOpen,color:\"inherit\",children:/*#__PURE__*/_jsx(Avatar,{sx:{width:32,height:32,bgcolor:'secondary.main'},children:user===null||user===void 0?void 0:(_user$username=user.username)===null||_user$username===void 0?void 0:_user$username.charAt(0).toUpperCase()})})]})}),/*#__PURE__*/_jsxs(Menu,{anchorEl:anchorEl,anchorOrigin:{vertical:'top',horizontal:'right'},keepMounted:true,transformOrigin:{vertical:'top',horizontal:'right'},open:Boolean(anchorEl),onClose:handleProfileMenuClose,children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{navigate('/settings');handleProfileMenuClose();},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(AccountCircle,{fontSize:\"small\"})}),\"Profile\"]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>{navigate('/settings');handleProfileMenuClose();},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Settings,{fontSize:\"small\"})}),\"Settings\"]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(MenuItem,{onClick:handleLogout,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Logout,{fontSize:\"small\"})}),\"Logout\"]})]}),/*#__PURE__*/_jsxs(Box,{component:\"nav\",sx:{width:{sm:drawerWidth},flexShrink:{sm:0}},\"aria-label\":\"mailbox folders\",children:[/*#__PURE__*/_jsx(Drawer,{variant:\"temporary\",open:mobileOpen,onClose:handleDrawerToggle,ModalProps:{keepMounted:true// Better open performance on mobile.\n},sx:{display:{xs:'block',sm:'none'},'& .MuiDrawer-paper':{boxSizing:'border-box',width:drawerWidth}},children:drawer}),/*#__PURE__*/_jsx(Drawer,{variant:\"permanent\",sx:{display:{xs:'none',sm:'block'},'& .MuiDrawer-paper':{boxSizing:'border-box',width:drawerWidth}},open:true,children:drawer})]}),/*#__PURE__*/_jsxs(Box,{component:\"main\",sx:{flexGrow:1,p:3,width:{sm:\"calc(100% - \".concat(drawerWidth,\"px)\")},minHeight:'100vh',backgroundColor:'background.default'},children:[/*#__PURE__*/_jsx(Toolbar,{}),children]})]});};export default Layout;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}